/**
 * Arabic Book Library PWA - Main Application
 * SPA architecture with 4 views + reader
 * Depends on window.DB from db.js
 */

(function () {
  'use strict';

  // ==================== BOOK DATA ====================

  const BOOKS = [
    { id: '4hww', title: '\u0623\u0633\u0628\u0648\u0639 \u0627\u0644\u0639\u0645\u0644 4 \u0633\u0627\u0639\u0627\u062A', subtitle: 'The 4-Hour Workweek', author: '\u062A\u064A\u0645 \u0641\u064A\u0631\u064A\u0633', authorEn: 'Tim Ferriss', category: 'productivity', categoryAr: '\u0627\u0644\u0625\u0646\u062A\u0627\u062C\u064A\u0629 \u0648\u0627\u0644\u062A\u0648\u0627\u0632\u0646', path: '\u0627\u0644\u0625\u0646\u062A\u0627\u062C\u064A\u0629-\u0648\u0627\u0644\u062A\u0648\u0627\u0632\u0646/4-hour-workweek-summary.html', color: 'red', emoji: '\u23F0', chapters: 6 },
    { id: 'dw', title: '\u0627\u0644\u0639\u0645\u0644 \u0627\u0644\u0639\u0645\u064A\u0642', subtitle: 'Deep Work', author: '\u0643\u0627\u0644 \u0646\u064A\u0648\u0628\u0648\u0631\u062A', authorEn: 'Cal Newport', category: 'productivity', categoryAr: '\u0627\u0644\u0625\u0646\u062A\u0627\u062C\u064A\u0629 \u0648\u0627\u0644\u062A\u0648\u0627\u0632\u0646', path: '\u0627\u0644\u0625\u0646\u062A\u0627\u062C\u064A\u0629-\u0648\u0627\u0644\u062A\u0648\u0627\u0632\u0646/deep-work-summary.html', color: 'blue', emoji: '\uD83E\uDDE0', chapters: 8 },
    { id: 'dwz', title: '\u0645\u062A \u0628\u0635\u0641\u0631', subtitle: 'Die With Zero', author: '\u0628\u064A\u0644 \u0628\u064A\u0631\u0643\u0646\u0632', authorEn: 'Bill Perkins', category: 'productivity', categoryAr: '\u0627\u0644\u0625\u0646\u062A\u0627\u062C\u064A\u0629 \u0648\u0627\u0644\u062A\u0648\u0627\u0632\u0646', path: '\u0627\u0644\u0625\u0646\u062A\u0627\u062C\u064A\u0629-\u0648\u0627\u0644\u062A\u0648\u0627\u0632\u0646/die-with-zero-summary.html', color: 'orange', emoji: '\u231B', chapters: 9 },
    { id: 'ess', title: '\u0627\u0644\u062C\u0648\u0647\u0631\u064A\u0629', subtitle: 'Essentialism', author: '\u063A\u0631\u064A\u063A \u0645\u0627\u0643\u064A\u0648\u0646', authorEn: 'Greg McKeown', category: 'productivity', categoryAr: '\u0627\u0644\u0625\u0646\u062A\u0627\u062C\u064A\u0629 \u0648\u0627\u0644\u062A\u0648\u0627\u0632\u0646', path: '\u0627\u0644\u0625\u0646\u062A\u0627\u062C\u064A\u0629-\u0648\u0627\u0644\u062A\u0648\u0627\u0632\u0646/essentialism-summary.html', color: 'green', emoji: '\u2728', chapters: 8 },
    { id: 'rest', title: '\u0627\u0644\u0631\u0627\u062D\u0629', subtitle: 'Rest', author: '\u0623\u0644\u064A\u0643\u0633 \u0633\u0648\u0646\u063A-\u0643\u064A\u0645 \u0628\u0627\u0646\u063A', authorEn: 'Alex Soojung-Kim Pang', category: 'productivity', categoryAr: '\u0627\u0644\u0625\u0646\u062A\u0627\u062C\u064A\u0629 \u0648\u0627\u0644\u062A\u0648\u0627\u0632\u0646', path: '\u0627\u0644\u0625\u0646\u062A\u0627\u062C\u064A\u0629-\u0648\u0627\u0644\u062A\u0648\u0627\u0632\u0646/rest-book-summary.html', color: 'crimson', emoji: '\uD83C\uDF19', chapters: 12 },
    { id: 'pom', title: '\u0633\u064A\u0643\u0648\u0644\u0648\u062C\u064A\u0629 \u0627\u0644\u0645\u0627\u0644', subtitle: 'The Psychology of Money', author: '\u0645\u0648\u0631\u063A\u0627\u0646 \u0647\u0627\u0648\u0633\u0644', authorEn: 'Morgan Housel', category: 'finance', categoryAr: '\u0627\u0644\u0645\u0627\u0644 \u0648\u0627\u0644\u0627\u0633\u062A\u062B\u0645\u0627\u0631', path: '\u0627\u0644\u0645\u0627\u0644-\u0648\u0627\u0644\u0627\u0633\u062A\u062B\u0645\u0627\u0631/psychology-of-money-summary.html', color: 'purple', emoji: '\uD83D\uDCD6', chapters: 20 },
    { id: 'sj', title: '\u0633\u062A\u064A\u0641 \u062C\u0648\u0628\u0632', subtitle: 'Steve Jobs', author: '\u0648\u0627\u0644\u062A\u0631 \u0625\u064A\u0632\u0627\u0643\u0633\u0648\u0646', authorEn: 'Walter Isaacson', category: 'biography', categoryAr: '\u0627\u0644\u0633\u064A\u0631 \u0627\u0644\u0630\u0627\u062A\u064A\u0629', path: '\u0627\u0644\u0633\u064A\u0631-\u0627\u0644\u0630\u0627\u062A\u064A\u0629/steve-jobs-summary.html', color: 'blue', emoji: '\uD83C\uDF4E', chapters: 8 },
    { id: 'em', title: '\u0625\u064A\u0644\u0648\u0646 \u0645\u0627\u0633\u0643', subtitle: 'Elon Musk', author: '\u0648\u0627\u0644\u062A\u0631 \u0625\u064A\u0632\u0627\u0643\u0633\u0648\u0646', authorEn: 'Walter Isaacson', category: 'biography', categoryAr: '\u0627\u0644\u0633\u064A\u0631 \u0627\u0644\u0630\u0627\u062A\u064A\u0629', path: '\u0627\u0644\u0633\u064A\u0631-\u0627\u0644\u0630\u0627\u062A\u064A\u0629/elon-musk-summary.html', color: 'crimson', emoji: '\uD83D\uDE80', chapters: 8 },
    { id: 'ldv', title: '\u0644\u064A\u0648\u0646\u0627\u0631\u062F\u0648 \u062F\u0627\u0641\u0646\u0634\u064A', subtitle: 'Leonardo da Vinci', author: '\u0648\u0627\u0644\u062A\u0631 \u0625\u064A\u0632\u0627\u0643\u0633\u0648\u0646', authorEn: 'Walter Isaacson', category: 'biography', categoryAr: '\u0627\u0644\u0633\u064A\u0631 \u0627\u0644\u0630\u0627\u062A\u064A\u0629', path: '\u0627\u0644\u0633\u064A\u0631-\u0627\u0644\u0630\u0627\u062A\u064A\u0629/leonardo-da-vinci-summary.html', color: 'amber', emoji: '\uD83C\uDFA8', chapters: 8 },
    { id: 'ein', title: '\u0623\u064A\u0646\u0634\u062A\u0627\u064A\u0646', subtitle: 'Einstein', author: '\u0648\u0627\u0644\u062A\u0631 \u0625\u064A\u0632\u0627\u0643\u0633\u0648\u0646', authorEn: 'Walter Isaacson', category: 'biography', categoryAr: '\u0627\u0644\u0633\u064A\u0631 \u0627\u0644\u0630\u0627\u062A\u064A\u0629', path: '\u0627\u0644\u0633\u064A\u0631-\u0627\u0644\u0630\u0627\u062A\u064A\u0629/einstein-summary.html', color: 'teal', emoji: '\u269B\uFE0F', chapters: 8 },
    { id: 'bf', title: '\u0628\u0646\u062C\u0627\u0645\u064A\u0646 \u0641\u0631\u0627\u0646\u0643\u0644\u064A\u0646', subtitle: 'Benjamin Franklin', author: '\u0648\u0627\u0644\u062A\u0631 \u0625\u064A\u0632\u0627\u0643\u0633\u0648\u0646', authorEn: 'Walter Isaacson', category: 'biography', categoryAr: '\u0627\u0644\u0633\u064A\u0631 \u0627\u0644\u0630\u0627\u062A\u064A\u0629', path: '\u0627\u0644\u0633\u064A\u0631-\u0627\u0644\u0630\u0627\u062A\u064A\u0629/benjamin-franklin-summary.html', color: 'navy', emoji: '\u26A1', chapters: 7 },
    { id: 'sd', title: '\u0634\u0648 \u062F\u0648\u062C', subtitle: 'Shoe Dog', author: '\u0641\u064A\u0644 \u0646\u0627\u064A\u062A', authorEn: 'Phil Knight', category: 'biography', categoryAr: '\u0627\u0644\u0633\u064A\u0631 \u0627\u0644\u0630\u0627\u062A\u064A\u0629', path: '\u0627\u0644\u0633\u064A\u0631-\u0627\u0644\u0630\u0627\u062A\u064A\u0629/shoe-dog-summary.html', color: 'orange', emoji: '\uD83D\uDC5F', chapters: 8 },
    { id: 'rol', title: '\u0631\u062D\u0644\u0629 \u0627\u0644\u0639\u0645\u0631', subtitle: 'The Ride of a Lifetime', author: '\u0628\u0648\u0628 \u0625\u064A\u063A\u0631', authorEn: 'Bob Iger', category: 'biography', categoryAr: '\u0627\u0644\u0633\u064A\u0631 \u0627\u0644\u0630\u0627\u062A\u064A\u0629', path: '\u0627\u0644\u0633\u064A\u0631-\u0627\u0644\u0630\u0627\u062A\u064A\u0629/ride-of-a-lifetime-summary.html', color: 'purple', emoji: '\uD83C\uDFF0', chapters: 8 },
    { id: 'titan', title: '\u062A\u0627\u064A\u062A\u0627\u0646', subtitle: 'Titan', author: '\u0631\u0648\u0646 \u0634\u064A\u0631\u0646\u0648', authorEn: 'Ron Chernow', category: 'biography', categoryAr: '\u0627\u0644\u0633\u064A\u0631 \u0627\u0644\u0630\u0627\u062A\u064A\u0629', path: '\u0627\u0644\u0633\u064A\u0631-\u0627\u0644\u0630\u0627\u062A\u064A\u0629/titan-summary.html', color: 'red', emoji: '\uD83D\uDEE2\uFE0F', chapters: 8 },
    { id: 'wbba', title: '\u0639\u0646\u062F\u0645\u0627 \u064A\u0635\u0628\u062D \u0627\u0644\u0646\u064E\u0641\u064E\u0633 \u0647\u0648\u0627\u0621\u064B', subtitle: 'When Breath Becomes Air', author: '\u0628\u0648\u0644 \u0643\u0627\u0644\u0627\u0646\u064A\u062B\u064A', authorEn: 'Paul Kalanithi', category: 'biography', categoryAr: '\u0627\u0644\u0633\u064A\u0631 \u0627\u0644\u0630\u0627\u062A\u064A\u0629', path: '\u0627\u0644\u0633\u064A\u0631-\u0627\u0644\u0630\u0627\u062A\u064A\u0629/when-breath-becomes-air-summary.html', color: 'cyan', emoji: '\uD83C\uDF2C\uFE0F', chapters: 7 },
    { id: 'gl', title: '\u0627\u0644\u0623\u0636\u0648\u0627\u0621 \u0627\u0644\u062E\u0636\u0631\u0627\u0621', subtitle: 'Greenlights', author: '\u0645\u0627\u062B\u064A\u0648 \u0645\u0627\u0643\u0648\u0646\u0647\u064A', authorEn: 'Matthew McConaughey', category: 'biography', categoryAr: '\u0627\u0644\u0633\u064A\u0631 \u0627\u0644\u0630\u0627\u062A\u064A\u0629', path: '\u0627\u0644\u0633\u064A\u0631-\u0627\u0644\u0630\u0627\u062A\u064A\u0629/greenlights-summary.html', color: 'forest', emoji: '\uD83D\uDFE2', chapters: 7 },
    { id: 'cbs', title: '\u0623\u0639\u0631\u0641 \u0644\u0645\u0627\u0630\u0627 \u064A\u063A\u0631\u062F \u0627\u0644\u0637\u0627\u0626\u0631 \u0627\u0644\u062D\u0628\u064A\u0633', subtitle: 'I Know Why the Caged Bird Sings', author: '\u0645\u0627\u064A\u0627 \u0623\u0646\u062C\u064A\u0644\u0648', authorEn: 'Maya Angelou', category: 'biography', categoryAr: '\u0627\u0644\u0633\u064A\u0631 \u0627\u0644\u0630\u0627\u062A\u064A\u0629', path: '\u0627\u0644\u0633\u064A\u0631-\u0627\u0644\u0630\u0627\u062A\u064A\u0629/caged-bird-sings-summary.html', color: 'pink', emoji: '\uD83D\uDC26', chapters: 7 },
    // Pregnancy Planning
    { id: 'tcyf', title: 'ØªØ­ÙƒÙ…ÙŠ Ø¨Ø®ØµÙˆØ¨ØªÙƒ', subtitle: 'Taking Charge of Your Fertility', author: 'ØªÙˆÙ†ÙŠ ÙˆÙŠØ´Ù„Ø±', authorEn: 'Toni Weschler', category: 'pregnancy', categoryAr: 'ØªØ®Ø·ÙŠØ· Ø§Ù„Ø­Ù…Ù„', path: 'ØªØ®Ø·ÙŠØ·-Ø§Ù„Ø­Ù…Ù„/taking-charge-fertility-summary.html', color: 'pink', emoji: 'ðŸŒ¸', chapters: 7 },
    { id: 'iswe', title: 'ÙŠØ¨Ø¯Ø£ Ø¨Ø§Ù„Ø¨ÙˆÙŠØ¶Ø©', subtitle: 'It Starts with the Egg', author: 'Ø±ÙŠØ¨ÙŠÙƒØ§ ÙÙŠØª', authorEn: 'Rebecca Fett', category: 'pregnancy', categoryAr: 'ØªØ®Ø·ÙŠØ· Ø§Ù„Ø­Ù…Ù„', path: 'ØªØ®Ø·ÙŠØ·-Ø§Ù„Ø­Ù…Ù„/it-starts-with-egg-summary.html', color: 'purple', emoji: 'ðŸ¥š', chapters: 7 },
    { id: 'af', title: 'Ø¥ÙŠÙ‚Ø§Ø¸ Ø§Ù„Ø®ØµÙˆØ¨Ø©', subtitle: 'Awakening Fertility', author: 'Ù‡ÙŠÙ†Øº Ø£Ùˆ', authorEn: 'Heng Ou', category: 'pregnancy', categoryAr: 'ØªØ®Ø·ÙŠØ· Ø§Ù„Ø­Ù…Ù„', path: 'ØªØ®Ø·ÙŠØ·-Ø§Ù„Ø­Ù…Ù„/awakening-fertility-summary.html', color: 'green', emoji: 'ðŸŒ¿', chapters: 7 },
    { id: 'iwg', title: 'Ø¯Ù„ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ¹Ø¬Ù„Ø© Ù„Ù„Ø­Ù…Ù„', subtitle: "The Impatient Woman's Guide to Getting Pregnant", author: 'Ø¬ÙŠÙ† ØªÙˆÙ†Ø¬', authorEn: 'Jean M. Twenge', category: 'pregnancy', categoryAr: 'ØªØ®Ø·ÙŠØ· Ø§Ù„Ø­Ù…Ù„', path: 'ØªØ®Ø·ÙŠØ·-Ø§Ù„Ø­Ù…Ù„/impatient-woman-guide-summary.html', color: 'orange', emoji: 'â±ï¸', chapters: 6 },
    { id: 'wbww', title: 'Ø£Ø¬Ø³Ø§Ø¯ Ø§Ù„Ù†Ø³Ø§Ø¡ØŒ Ø­ÙƒÙ…Ø© Ø§Ù„Ù†Ø³Ø§Ø¡', subtitle: "Women's Bodies, Women's Wisdom", author: 'ÙƒØ±ÙŠØ³ØªÙŠØ§Ù† Ù†ÙˆØ±Ø«Ø±ÙˆØ¨', authorEn: 'Christiane Northrup', category: 'pregnancy', categoryAr: 'ØªØ®Ø·ÙŠØ· Ø§Ù„Ø­Ù…Ù„', path: 'ØªØ®Ø·ÙŠØ·-Ø§Ù„Ø­Ù…Ù„/womens-bodies-wisdom-summary.html', color: 'crimson', emoji: 'ðŸ’ª', chapters: 7 },
    { id: 'tfd', title: 'Ø­Ù…ÙŠØ© Ø§Ù„Ø®ØµÙˆØ¨Ø©', subtitle: 'The Fertility Diet', author: 'Ø®ÙˆØ±Ø®ÙŠ ØªØ´Ø§ÙØ§Ø±Ùˆ', authorEn: 'Jorge Chavarro', category: 'pregnancy', categoryAr: 'ØªØ®Ø·ÙŠØ· Ø§Ù„Ø­Ù…Ù„', path: 'ØªØ®Ø·ÙŠØ·-Ø§Ù„Ø­Ù…Ù„/fertility-diet-summary.html', color: 'teal', emoji: 'ðŸ¥—', chapters: 6 },
    { id: 'ef', title: 'Ø§Ù„Ø®ØµÙˆØ¨Ø© Ø§Ù„Ù…ÙÙ…ÙƒÙ‘Ù†Ø©', subtitle: 'Empowered Fertility', author: 'ÙƒÙ„ÙŠØ± Ù‡ÙˆÙ„ ÙˆØ¯ÙŠÙÙˆØ±Ø§ Ù„ÙŠØ¨Ø±Ù…Ø§Ù†', authorEn: 'Claire Hall & Devora Lieberman', category: 'pregnancy', categoryAr: 'ØªØ®Ø·ÙŠØ· Ø§Ù„Ø­Ù…Ù„', path: 'ØªØ®Ø·ÙŠØ·-Ø§Ù„Ø­Ù…Ù„/empowered-fertility-summary.html', color: 'blue', emoji: 'âœ¨', chapters: 7 },
    { id: 'tft', title: 'Ø§Ù„ÙØµÙ„ Ø§Ù„Ø±Ø§Ø¨Ø¹', subtitle: 'The Fourth Trimester', author: 'ÙƒÙŠÙ…Ø¨Ø±Ù„ÙŠ Ø¢Ù† Ø¬ÙˆÙ†Ø³ÙˆÙ†', authorEn: 'Kimberly Ann Johnson', category: 'pregnancy', categoryAr: 'ØªØ®Ø·ÙŠØ· Ø§Ù„Ø­Ù…Ù„', path: 'ØªØ®Ø·ÙŠØ·-Ø§Ù„Ø­Ù…Ù„/fourth-trimester-summary.html', color: 'amber', emoji: 'ðŸ¤±', chapters: 7 },
    { id: 'prm', title: 'Ø¯Ù„ÙŠÙ„ Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ø¯ÙˆØ±Ø©', subtitle: 'Period Repair Manual', author: 'Ù„Ø§Ø±Ø§ Ø¨Ø±ÙŠØ¯Ù†', authorEn: 'Lara Briden', category: 'pregnancy', categoryAr: 'ØªØ®Ø·ÙŠØ· Ø§Ù„Ø­Ù…Ù„', path: 'ØªØ®Ø·ÙŠØ·-Ø§Ù„Ø­Ù…Ù„/period-repair-manual-summary.html', color: 'red', emoji: 'ðŸ”¬', chapters: 7 },
    { id: 'cpg', title: 'Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø£Ø²ÙˆØ§Ø¬ Ù„Ù„Ø­Ù…Ù„', subtitle: "The Couples' Pregnancy Guide", author: 'Ø¯Ø£Ù†ØªÙˆÙ†ÙŠ ÙˆØ§Ø±Ø¯ ÙˆØ±Ø§Ø´ÙŠÙ„ ÙˆØ§Ø±Ø¯', authorEn: "D'Anthony Ward & Rachel Ward", category: 'pregnancy', categoryAr: 'ØªØ®Ø·ÙŠØ· Ø§Ù„Ø­Ù…Ù„', path: 'ØªØ®Ø·ÙŠØ·-Ø§Ù„Ø­Ù…Ù„/couples-pregnancy-guide-summary.html', color: 'navy', emoji: 'ðŸ’‘', chapters: 6 },
    // Fatherhood
    { id: 'tef', title: 'Ø§Ù„Ø£Ø¨ Ø§Ù„Ù…Ù†ØªØ¸Ø±', subtitle: 'The Expectant Father', author: 'Ø£Ø±Ù…ÙŠÙ† Ø¨Ø±ÙˆØª ÙˆØ¬Ù†ÙŠÙØ± Ø¢Ø´ Ø±ÙˆØ¯ÙŠÙƒ', authorEn: 'Armin A. Brott & Jennifer Ash Rudick', category: 'fatherhood', categoryAr: 'Ø§Ù„Ø£Ø¨ÙˆØ©', path: 'Ø§Ù„Ø£Ø¨ÙˆØ©/expectant-father-summary.html', color: 'blue', emoji: 'ðŸ‘¨â€ðŸ‘¶', chapters: 7 },
    { id: 'tnf', title: 'Ø§Ù„Ø£Ø¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯', subtitle: 'The New Father', author: 'Ø£Ø±Ù…ÙŠÙ† Ø¨Ø±ÙˆØª', authorEn: 'Armin A. Brott', category: 'fatherhood', categoryAr: 'Ø§Ù„Ø£Ø¨ÙˆØ©', path: 'Ø§Ù„Ø£Ø¨ÙˆØ©/new-father-summary.html', color: 'teal', emoji: 'ðŸ‘¶', chapters: 7 },
    { id: 'tbp', title: 'Ø´Ø±ÙŠÙƒ Ø§Ù„ÙˆÙ„Ø§Ø¯Ø©', subtitle: 'The Birth Partner', author: 'Ø¨ÙŠÙ†ÙŠ Ø³ÙŠÙ…ÙƒÙŠÙ†', authorEn: 'Penny Simkin', category: 'fatherhood', categoryAr: 'Ø§Ù„Ø£Ø¨ÙˆØ©', path: 'Ø§Ù„Ø£Ø¨ÙˆØ©/birth-partner-summary.html', color: 'crimson', emoji: 'ðŸ¤', chapters: 7 },
    { id: 'bp', title: 'ÙƒÙ† Ù…Ø³ØªØ¹Ø¯Ø§Ù‹', subtitle: 'Be Prepared', author: 'ØºØ§Ø±ÙŠ ØºØ±ÙŠÙ†Ø¨Ø±Øº', authorEn: 'Gary Greenberg', category: 'fatherhood', categoryAr: 'Ø§Ù„Ø£Ø¨ÙˆØ©', path: 'Ø§Ù„Ø£Ø¨ÙˆØ©/be-prepared-summary.html', color: 'orange', emoji: 'ðŸŽ’', chapters: 6 },
    { id: 'ndsg', title: 'Ø¯Ù„ÙŠÙ„ Ù†Ø¬Ø§Ø© Ø§Ù„Ø£Ø¨ Ø§Ù„Ø¬Ø¯ÙŠØ¯', subtitle: "The New Dad's Survival Guide", author: 'Ø³ÙƒÙˆØª Ù…Ø§ÙƒØªØ§ÙÙŠØ´', authorEn: 'Scott Mactavish', category: 'fatherhood', categoryAr: 'Ø§Ù„Ø£Ø¨ÙˆØ©', path: 'Ø§Ù„Ø£Ø¨ÙˆØ©/new-dad-survival-summary.html', color: 'green', emoji: 'ðŸ›¡ï¸', chapters: 6 },
    { id: 'tde', title: 'Ù…ÙŠØ²Ø© Ø§Ù„Ø£Ø¨', subtitle: "The Dad's Edge", author: 'Ù„Ø§Ø±ÙŠ Ù‡Ø§ØºÙ†Ø±', authorEn: 'Larry Hagner', category: 'fatherhood', categoryAr: 'Ø§Ù„Ø£Ø¨ÙˆØ©', path: 'Ø§Ù„Ø£Ø¨ÙˆØ©/dads-edge-summary.html', color: 'purple', emoji: 'ðŸ’ª', chapters: 7 },
    { id: 'dad', title: 'Ø£Ø¨: ÙƒÙŠÙ ØªÙƒÙˆÙ† Ø§Ù„Ø£Ø¨ Ø§Ù„Ø°ÙŠ ÙŠØ­ØªØ§Ø¬Ù‡ Ø£Ø·ÙØ§Ù„Ùƒ', subtitle: 'Dad', author: 'ÙƒØ±ÙŠØº ÙˆÙŠÙ„ÙƒÙ†Ø³ÙˆÙ†', authorEn: 'Craig Wilkinson', category: 'fatherhood', categoryAr: 'Ø§Ù„Ø£Ø¨ÙˆØ©', path: 'Ø§Ù„Ø£Ø¨ÙˆØ©/dad-summary.html', color: 'navy', emoji: 'â¤ï¸', chapters: 7 },
    { id: 'sfsd', title: 'Ø¢Ø¨Ø§Ø¡ Ø£Ù‚ÙˆÙŠØ§Ø¡ØŒ Ø¨Ù†Ø§Øª Ù‚ÙˆÙŠØ§Øª', subtitle: 'Strong Fathers, Strong Daughters', author: 'Ù…ÙŠØº Ù…ÙŠÙƒØ±', authorEn: 'Meg Meeker', category: 'fatherhood', categoryAr: 'Ø§Ù„Ø£Ø¨ÙˆØ©', path: 'Ø§Ù„Ø£Ø¨ÙˆØ©/strong-fathers-daughters-summary.html', color: 'pink', emoji: 'ðŸ‘¨â€ðŸ‘§', chapters: 7 },
    { id: 'bdss', title: 'Ø¢Ø¨Ø§Ø¡ Ø£ÙØ¶Ù„ØŒ Ø£Ø¨Ù†Ø§Ø¡ Ø£Ù‚ÙˆÙ‰', subtitle: 'Better Dads, Stronger Sons', author: 'Ø±ÙŠÙƒ Ø¬ÙˆÙ†Ø³ÙˆÙ†', authorEn: 'Rick Johnson', category: 'fatherhood', categoryAr: 'Ø§Ù„Ø£Ø¨ÙˆØ©', path: 'Ø§Ù„Ø£Ø¨ÙˆØ©/better-dads-sons-summary.html', color: 'amber', emoji: 'ðŸ‘¨â€ðŸ‘¦', chapters: 7 },
    { id: 'fhood', title: 'Ø§Ù„Ø£Ø¨ÙˆØ©: Ø§Ù„Ù‚Ø¨ÙˆÙ„ Ø¨Ø§Ù„ØªØ­Ø¯ÙŠ Ø§Ù„Ø£Ø¹Ø¸Ù…', subtitle: 'Fatherhood', author: 'Ø¥ÙŠØªØ§Ù† ØªÙˆÙ…Ø§Ø³', authorEn: 'Etan Thomas', category: 'fatherhood', categoryAr: 'Ø§Ù„Ø£Ø¨ÙˆØ©', path: 'Ø§Ù„Ø£Ø¨ÙˆØ©/fatherhood-summary.html', color: 'red', emoji: 'ðŸ€', chapters: 7 },
  ];

  // Category metadata
  const CATEGORIES = [
    { id: 'productivity', ar: '\u0627\u0644\u0625\u0646\u062A\u0627\u062C\u064A\u0629 \u0648\u0627\u0644\u062A\u0648\u0627\u0632\u0646', icon: '\u26A1' },
    { id: 'finance', ar: '\u0627\u0644\u0645\u0627\u0644 \u0648\u0627\u0644\u0627\u0633\u062A\u062B\u0645\u0627\u0631', icon: '\uD83D\uDCB0' },
    { id: 'biography', ar: '\u0627\u0644\u0633\u064A\u0631 \u0627\u0644\u0630\u0627\u062A\u064A\u0629', icon: '\uD83D\uDC64' },
    { id: 'pregnancy', ar: 'ØªØ®Ø·ÙŠØ· Ø§Ù„Ø­Ù…Ù„', icon: 'ðŸ¤°' },
    { id: 'fatherhood', ar: 'Ø§Ù„Ø£Ø¨ÙˆØ©', icon: 'ðŸ‘¨â€ðŸ‘§â€ðŸ‘¦' },
  ];

  // ==================== BOOK ACTIONS ====================

  const BOOK_ACTIONS = {
    '4hww': [
      'Ø­Ø¯Ø¯ 3 Ù…Ù‡Ø§Ù… Ø£Ø³Ø§Ø³ÙŠØ© ÙƒÙ„ ÙŠÙˆÙ… ÙˆØ±ÙƒØ² Ø¹Ù„ÙŠÙ‡Ø§ ÙÙ‚Ø·',
      'Ø·Ø¨Ù‚ Ù‚Ø§Ø¹Ø¯Ø© 80/20: Ø­Ø¯Ø¯ Ø§Ù„Ù€20% Ù…Ù† Ø¹Ù…Ù„Ùƒ Ø§Ù„Ù„ÙŠ ÙŠØ¬ÙŠØ¨ 80% Ù…Ù† Ø§Ù„Ù†ØªØ§Ø¦Ø¬',
      'Ø¬Ø±Ø¨ ØªÙÙˆÙŠØ¶ Ù…Ù‡Ù…Ø© ÙˆØ§Ø­Ø¯Ø© Ù‡Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ù„Ø´Ø®Øµ Ø«Ø§Ù†ÙŠ Ø£Ùˆ Ø®Ø¯Ù…Ø©',
      'Ø­Ø¯Ø¯ Ø£ÙˆÙ‚Ø§Øª Ù…Ø­Ø¯Ø¯Ø© Ù„ØªØ´ÙŠÙƒ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ Ø¨Ø¯Ù„ Ù…Ø§ ØªØ´ÙŠÙƒÙ‡ ÙƒÙ„ Ø´ÙˆÙŠ',
      'Ø§Ø¹Ù…Ù„ "ØªØ¬Ø±Ø¨Ø© Ù…ØµØºØ±Ø©" Ù„Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø§Ù†Ø¨ÙŠ ÙŠØ¯Ø®Ù„Ùƒ Ø¯Ø®Ù„ Ø¥Ø¶Ø§ÙÙŠ',
      'Ø®Ø·Ø· Ù„Ø¥Ø¬Ø§Ø²Ø© Ù‚ØµÙŠØ±Ø© ÙˆØ´ÙˆÙ ÙƒÙŠÙ Ø´ØºÙ„Ùƒ ÙŠÙ…Ø´ÙŠ Ø¨Ø¯ÙˆÙ†Ùƒ',
    ],
    'dw': [
      'Ø®ØµØµ Ø³Ø§Ø¹ØªÙŠÙ† ÙŠÙˆÙ…ÙŠØ§Ù‹ Ù„Ù„Ø¹Ù…Ù„ Ø§Ù„Ø¹Ù…ÙŠÙ‚ Ø¨Ø¯ÙˆÙ† Ø£ÙŠ Ù…Ø´ØªØªØ§Øª',
      'Ø£ØºÙ„Ù‚ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙˆØ§Ù„Ø³ÙˆØ´Ù„ Ù…ÙŠØ¯ÙŠØ§ ÙˆÙ‚Øª Ø§Ù„ØªØ±ÙƒÙŠØ²',
      'Ø­Ø¯Ø¯ Ù…ÙƒØ§Ù† Ø«Ø§Ø¨Øª Ù„Ù„Ø¹Ù…Ù„ Ø§Ù„Ø¹Ù…ÙŠÙ‚ ÙˆØ®Ù„ÙŠÙ‡ Ø¨ÙŠØ¦Ø© Ø®Ø§Ù„ÙŠØ© Ù…Ù† Ø§Ù„Ù…Ø´ØªØªØ§Øª',
      'Ø·Ø¨Ù‚ "Ø·Ù‚ÙˆØ³ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©": Ù‚Ù‡ÙˆØ©ØŒ Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ù…Ø­Ø¯Ø¯Ø©ØŒ Ø£Ùˆ ØªÙ…Ø±ÙŠÙ† Ù‚Ø¨Ù„ Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø¹Ù…ÙŠÙ‚',
      'ØªØªØ¨Ø¹ Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø¹Ù…ÙŠÙ‚ ÙŠÙˆÙ…ÙŠØ§Ù‹ ÙˆØ§ÙƒØªØ¨Ù‡Ø§ ÙÙŠ Ø¯ÙØªØ±',
      'Ù‚Ù„ "Ù„Ø§" Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ ÙˆØ§Ø­Ø¯ ØºÙŠØ± Ø¶Ø±ÙˆØ±ÙŠ Ù‡Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹',
    ],
    'dwz': [
      'Ø§ÙƒØªØ¨ Ù‚Ø§Ø¦Ù…Ø© Ø¨Ù€10 ØªØ¬Ø§Ø±Ø¨ ØªØ¨ÙŠ ØªØ¹ÙŠØ´Ù‡Ø§ Ù‚Ø¨Ù„ Ø¹Ù…Ø± Ø§Ù„Ù€50',
      'Ø§Ø­Ø³Ø¨ "Ø¹Ø§Ø¦Ø¯ Ø§Ù„Ø°ÙƒØ±ÙŠØ§Øª" Ù„ØªØ¬Ø±Ø¨Ø© ØªÙÙƒØ± ÙÙŠÙ‡Ø§ Ù…Ù‚Ø§Ø¨Ù„ ØªÙƒÙ„ÙØªÙ‡Ø§',
      'Ø§Ø¹Ø·Ù Ù‡Ø¯ÙŠØ© Ø£Ùˆ Ø³Ø§Ø¹Ø¯ Ø´Ø®Øµ Ù‚Ø±ÙŠØ¨ Ø§Ù„Ø­ÙŠÙ† Ø¨Ø¯Ù„ Ù…Ø§ ØªÙ†ØªØ¸Ø±',
      'Ø®Ø·Ø· Ù„ØªØ¬Ø±Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø© Ù‡Ø§Ù„Ø´Ù‡Ø± Ù…Ø¹ Ø¹Ø§Ø¦Ù„ØªÙƒ Ø£Ùˆ Ø£ØµØ¯Ù‚Ø§Ø¦Ùƒ',
      'Ø±Ø§Ø¬Ø¹ Ù…ØµØ§Ø±ÙŠÙÙƒ ÙˆØ­ÙˆÙ„ Ø¬Ø²Ø¡ Ù…Ù† Ø§Ù„Ø§Ø¯Ø®Ø§Ø± Ø§Ù„Ù…ÙØ±Ø· Ù„ØªØ¬Ø§Ø±Ø¨ Ø­Ù‚ÙŠÙ‚ÙŠØ©',
      'Ø§ÙƒØªØ¨ "Ø®Ø·Ø© Ø­ÙŠØ§Ø©" Ø¨Ø§Ù„Ø¹Ù‚ÙˆØ¯: ÙˆØ´ ØªØ¨ÙŠ ØªØ­Ù‚Ù‚ ÙƒÙ„ 10 Ø³Ù†ÙˆØ§Øª',
    ],
    'ess': [
      'Ø§ÙƒØªØ¨ Ù‚Ø§Ø¦Ù…Ø© Ø¨ÙƒÙ„ Ø§Ù„ØªØ²Ø§Ù…Ø§ØªÙƒ ÙˆØ´Ø·Ø¨ 3 Ø£Ø´ÙŠØ§Ø¡ ØºÙŠØ± Ø¶Ø±ÙˆØ±ÙŠØ©',
      'ØªØ¹Ù„Ù… ØªÙ‚ÙˆÙ„ "Ù„Ø§" Ø¨Ù„Ø·Ù: Ø¬Ø±Ø¨ Ø±ÙØ¶ Ø·Ù„Ø¨ ÙˆØ§Ø­Ø¯ Ù‡Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹',
      'Ø­Ø¯Ø¯ Ø§Ù„Ø´ÙŠØ¡ Ø§Ù„ÙˆØ§Ø­Ø¯ Ø§Ù„Ø£Ù‡Ù… Ø¹Ù†Ø¯Ùƒ ÙÙŠ Ø§Ù„Ø­ÙŠØ§Ø© Ø§Ù„Ø­ÙŠÙ†',
      'Ù†Ø¸Ù Ù…ÙƒØªØ¨Ùƒ Ø£Ùˆ ØºØ±ÙØªÙƒ: ØªØ®Ù„Øµ Ù…Ù† 10 Ø£Ø´ÙŠØ§Ø¡ Ù…Ø§ ØªØ­ØªØ§Ø¬Ù‡Ø§',
      'Ø®ØµØµ ÙˆÙ‚Øª "ÙØ±Ø§Øº Ù…Ø®Ø·Ø·" Ø£Ø³Ø¨ÙˆØ¹ÙŠØ§Ù‹ Ù„Ù„ØªÙÙƒÙŠØ± ÙˆØ§Ù„ØªØ£Ù…Ù„',
      'Ù‚Ø¨Ù„ Ù…Ø§ ØªÙ‚Ø¨Ù„ Ø£ÙŠ Ø§Ù„ØªØ²Ø§Ù… Ø¬Ø¯ÙŠØ¯ØŒ Ø§Ø³Ø£Ù„: "Ù‡Ù„ Ù‡Ø°Ø§ Ø¶Ø±ÙˆØ±ÙŠ ÙØ¹Ù„Ø§Ù‹ØŸ"',
    ],
    'rest': [
      'Ø®Ø° Ù‚ÙŠÙ„ÙˆÙ„Ø© 20 Ø¯Ù‚ÙŠÙ‚Ø© ÙŠÙˆÙ…ÙŠØ§Ù‹ Ø¨Ø¹Ø¯ Ø§Ù„Ø¸Ù‡Ø±',
      'Ù…Ø§Ø±Ø³ Ù‡ÙˆØ§ÙŠØ© Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ© Ù„Ø§ Ø¹Ù„Ø§Ù‚Ø© Ù„Ù‡Ø§ Ø¨Ø´ØºÙ„Ùƒ (Ø±Ø³Ù…ØŒ Ù…ÙˆØ³ÙŠÙ‚Ù‰ØŒ Ø·Ø¨Ø®)',
      'Ø§Ù…Ø´Ù 30 Ø¯Ù‚ÙŠÙ‚Ø© ÙŠÙˆÙ…ÙŠØ§Ù‹ ÙÙŠ Ø§Ù„Ø·Ø¨ÙŠØ¹Ø© Ø¨Ø¯ÙˆÙ† Ø¬ÙˆØ§Ù„',
      'Ø­Ø¯Ø¯ ÙˆÙ‚Øª Ù†Ù‡Ø§ÙŠØ© Ø«Ø§Ø¨Øª Ù„Ø´ØºÙ„Ùƒ ÙƒÙ„ ÙŠÙˆÙ… ÙˆØ§Ù„ØªØ²Ù… ÙÙŠÙ‡',
      'Ø®ØµØµ ÙŠÙˆÙ… Ø±Ø§Ø­Ø© ÙƒØ§Ù…Ù„ ÙÙŠ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø¨Ø¯ÙˆÙ† Ø£ÙŠ Ø´ØºÙ„',
      'Ø¬Ø±Ø¨ Ø§Ù„ØªØ£Ù…Ù„ Ø£Ùˆ ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„ØªÙ†ÙØ³ 10 Ø¯Ù‚Ø§Ø¦Ù‚ ÙƒÙ„ ØµØ¨Ø§Ø­',
    ],
    'pom': [
      'Ø§Ø¨Ø¯Ø£ Ø¨Ø§Ø¯Ø®Ø§Ø± 10% Ù…Ù† Ø¯Ø®Ù„Ùƒ Ø§Ù„Ø´Ù‡Ø±ÙŠ Ø¨Ø´ÙƒÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠ',
      'Ø§ÙƒØªØ¨ "Ù‚ØµØªÙƒ Ø§Ù„Ù…Ø§Ù„ÙŠØ©": ÙƒÙŠÙ Ø£Ø«Ø±Øª ØªØ±Ø¨ÙŠØªÙƒ Ø¹Ù„Ù‰ Ø¹Ù„Ø§Ù‚ØªÙƒ Ø¨Ø§Ù„ÙÙ„ÙˆØ³',
      'Ù„Ø§ ØªÙ‚Ø§Ø±Ù† Ù†ÙØ³Ùƒ Ø¨ØºÙŠØ±Ùƒ Ù…Ø§Ù„ÙŠØ§Ù‹ - Ø­Ø¯Ø¯ Ø£Ù‡Ø¯Ø§ÙÙƒ Ø§Ù„Ø®Ø§ØµØ©',
      'Ø§Ø¨Ø¯Ø£ ÙÙŠ Ø§Ø³ØªØ«Ù…Ø§Ø± Ø¨Ø³ÙŠØ· (ØµÙ†Ø¯ÙˆÙ‚ Ù…Ø¤Ø´Ø±Ø§Øª) ÙˆÙ„Ùˆ Ø¨Ù…Ø¨Ù„Øº ØµØºÙŠØ±',
      'Ø§Ø¹Ù…Ù„ "ØµÙ†Ø¯ÙˆÙ‚ Ø·ÙˆØ§Ø±Ø¦" ÙŠÙƒÙÙŠÙƒ 6 Ø´Ù‡ÙˆØ± Ù…Ù† Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ',
      'Ø§Ù‚Ø±Ø£ Ø¹Ù† Ù…ÙÙ‡ÙˆÙ… "Ø§Ù„ÙØ§Ø¦Ø¯Ø© Ø§Ù„Ù…Ø±ÙƒØ¨Ø©" ÙˆØ·Ø¨Ù‚Ù‡ Ø¹Ù„Ù‰ Ø§Ø³ØªØ«Ù…Ø§Ø±Ø§ØªÙƒ',
    ],
    'sj': [
      'Ø¬Ø±Ø¨ Ø±Ø¨Ø· Ù…Ø¬Ø§Ù„ÙŠÙ† Ù…Ø®ØªÙ„ÙÙŠÙ† Ù…Ù† Ø§Ù‡ØªÙ…Ø§Ù…Ø§ØªÙƒ ÙÙŠ Ù…Ø´Ø±ÙˆØ¹ ÙˆØ§Ø­Ø¯',
      'Ø§Ø´ØªØºÙ„ Ø¹Ù„Ù‰ ØªØ¨Ø³ÙŠØ· Ø´ÙŠØ¡ Ù…Ø¹Ù‚Ø¯ ÙÙŠ Ø­ÙŠØ§ØªÙƒ Ø£Ùˆ Ø´ØºÙ„Ùƒ',
      'Ø§Ø·Ù„Ø¨ Ø±Ø£ÙŠ ØµØ±ÙŠØ­ Ù…Ù† 3 Ø£Ø´Ø®Ø§Øµ ØªØ«Ù‚ ÙÙŠÙ‡Ù… Ø¹Ù† Ø£Ø¯Ø§Ø¦Ùƒ',
      'ØµÙ…Ù… Ø£Ùˆ Ø­Ø³Ù‘Ù† ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ù…Ù†ØªØ¬ Ø£Ùˆ Ø®Ø¯Ù…Ø© ØªÙ‚Ø¯Ù…Ù‡Ø§',
      'Ø§Ø±Ø¬Ø¹ Ù„Ù…Ø´Ø±ÙˆØ¹ ÙØ§Ø´Ù„ Ù‚Ø¯ÙŠÙ… ÙˆØ´ÙˆÙÙ‡ Ø¨Ù†Ø¸Ø±Ø© Ø¬Ø¯ÙŠØ¯Ø©',
      'Ø±ÙƒØ² Ø¹Ù„Ù‰ Ø§Ù„Ø¬ÙˆØ¯Ø© Ù…Ùˆ Ø§Ù„ÙƒÙ…ÙŠØ©: Ø£Ù†Ù‡Ù Ù…Ø´Ø±ÙˆØ¹ ÙˆØ§Ø­Ø¯ Ø¨Ø§Ø­ØªØ±Ø§ÙÙŠØ©',
    ],
    'em': [
      'Ø­Ø¯Ø¯ Ù…Ø´ÙƒÙ„Ø© ÙƒØ¨ÙŠØ±Ø© ØªÙ‡Ù…Ùƒ ÙˆÙÙƒØ± ÙÙŠ Ø­Ù„ Ù…Ù† Ø§Ù„Ù…Ø¨Ø§Ø¯Ø¦ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©',
      'ØªØ¹Ù„Ù… Ù…Ù‡Ø§Ø±Ø© ØªÙ‚Ù†ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø© Ø®Ø§Ø±Ø¬ ØªØ®ØµØµÙƒ (Ø¨Ø±Ù…Ø¬Ø©ØŒ ØªØµÙ…ÙŠÙ…ØŒ Ù‡Ù†Ø¯Ø³Ø©)',
      'Ø­Ø¯Ø¯ Ù‡Ø¯Ù Ø·Ù…ÙˆØ­ Ø¬Ø¯Ø§Ù‹ Ù„Ù€5 Ø³Ù†ÙˆØ§Øª Ù‚Ø¯Ø§Ù… ÙˆØ§ÙƒØªØ¨ Ø®Ø·ÙˆØ§Øª ØªØ­Ù‚ÙŠÙ‚Ù‡',
      'Ø§Ø³Ø£Ù„ Ù†ÙØ³Ùƒ: "Ø¥ÙŠØ´ Ø§Ù„Ø£Ø³ÙˆØ£ Ø§Ù„Ù„ÙŠ Ù…Ù…ÙƒÙ† ÙŠØµÙŠØ±ØŸ" Ù‚Ø¨Ù„ Ù…Ø§ ØªØ®Ø§Ù Ù…Ù† Ø§Ù„Ù…Ø®Ø§Ø·Ø±Ø©',
      'Ø§Ù‚Ø±Ø£ Ø¹Ù† Ù…Ø¬Ø§Ù„ Ø¹Ù„Ù…ÙŠ Ø¬Ø¯ÙŠØ¯ ÙƒÙ„ Ø´Ù‡Ø± (ÙÙŠØ²ÙŠØ§Ø¡ØŒ ÙÙ„ÙƒØŒ Ø°ÙƒØ§Ø¡ Ø§ØµØ·Ù†Ø§Ø¹ÙŠ)',
      'Ø·Ø¨Ù‚ "Ø§Ù„ØªÙÙƒÙŠØ± Ù…Ù† Ø§Ù„Ù…Ø¨Ø§Ø¯Ø¦ Ø§Ù„Ø£ÙˆÙ„Ù‰" Ø¹Ù„Ù‰ Ù…Ø´ÙƒÙ„Ø© ØªÙˆØ§Ø¬Ù‡Ùƒ Ø­Ø§Ù„ÙŠØ§Ù‹',
    ],
    'ldv': [
      'Ø§Ø­Ù…Ù„ Ø¯ÙØªØ± ØµØºÙŠØ± ÙˆØ³Ø¬Ù„ ÙƒÙ„ ÙÙƒØ±Ø© Ø£Ùˆ Ù…Ù„Ø§Ø­Ø¸Ø© ØªÙ…Ø± Ø¹Ù„ÙŠÙƒ',
      'Ø§Ø±Ø³Ù… Ø´ÙŠØ¡ ØªØ´ÙˆÙÙ‡ ÙŠÙˆÙ…ÙŠØ§Ù‹ Ø­ØªÙ‰ Ù„Ùˆ Ù…Ø§ ÙƒÙ†Øª ÙÙ†Ø§Ù†',
      'Ø§Ø³Ø£Ù„ "Ù„ÙŠØ´ØŸ" 5 Ù…Ø±Ø§Øª Ø¹Ù† Ø´ÙŠØ¡ Ø¹Ø§Ø¯ÙŠ ØªØ´ÙˆÙÙ‡ ÙƒÙ„ ÙŠÙˆÙ…',
      'Ø§Ø¯Ø±Ø³ Ù…Ø¬Ø§Ù„ Ù…Ø®ØªÙ„Ù ØªÙ…Ø§Ù…Ø§Ù‹ Ø¹Ù† ØªØ®ØµØµÙƒ Ù„Ù…Ø¯Ø© Ø´Ù‡Ø±',
      'Ù„Ø§Ø­Ø¸ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ø¨ÙŠØ¹Ø©: Ø§Ù„Ø¸Ù„ØŒ Ø§Ù„Ø¶ÙˆØ¡ØŒ Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ø§Ø¡',
      'Ø§Ø¬Ù…Ø¹ Ø¨ÙŠÙ† Ø§Ù„Ø¹Ù„Ù… ÙˆØ§Ù„ÙÙ†: Ø¬Ø±Ø¨ Ù…Ø´Ø±ÙˆØ¹ ÙŠØ¯Ù…Ø¬ Ø§Ù„Ø§Ø«Ù†ÙŠÙ†',
    ],
    'ein': [
      'Ø®ØµØµ ÙˆÙ‚Øª Ù„Ù„ØªØ®ÙŠÙ„ ÙˆØ§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ø­Ø± Ø¨Ø¯ÙˆÙ† Ù‚ÙŠÙˆØ¯',
      'ØªØ­Ø¯Ù‰ ÙØ±Ø¶ÙŠØ© ÙˆØ§Ø­Ø¯Ø© ØªØ¤Ù…Ù† ÙÙŠÙ‡Ø§ ÙˆØ§Ø³Ø£Ù„: "Ù…Ø§Ø°Ø§ Ù„Ùˆ ÙƒÙ†Øª ØºÙ„Ø·Ø§Ù†ØŸ"',
      'Ø¨Ø³Ù‘Ø· ÙÙƒØ±Ø© Ù…Ø¹Ù‚Ø¯Ø© Ø­ØªÙ‰ ÙŠÙÙ‡Ù…Ù‡Ø§ Ø·ÙÙ„ Ø¹Ù…Ø±Ù‡ 10 Ø³Ù†ÙˆØ§Øª',
      'Ù…Ø§Ø±Ø³ Ù‡ÙˆØ§ÙŠØ© Ù…ÙˆØ³ÙŠÙ‚ÙŠØ© (Ø§Ù„Ø¹Ø²Ù ÙŠØ­ÙØ² Ø§Ù„ØªÙÙƒÙŠØ± Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ)',
      'Ø§Ù‚Ø¶Ù ÙˆÙ‚Øª Ø¨Ù…ÙØ±Ø¯Ùƒ Ù„Ù„ØªØ£Ù…Ù„ Ø§Ù„Ø¹Ù…ÙŠÙ‚ Ø¨Ø¯ÙˆÙ† Ø£ÙŠ ØªØ´ØªÙŠØª',
      'Ù†Ø§Ù‚Ø´ Ø£ÙÙƒØ§Ø±Ùƒ Ù…Ø¹ Ø´Ø®Øµ ÙŠØ®ØªÙ„Ù Ù…Ø¹Ùƒ ÙÙŠ Ø§Ù„Ø±Ø£ÙŠ',
    ],
    'bf': [
      'Ø§Ø®ØªØ± 3 ÙØ¶Ø§Ø¦Ù„ Ù…Ù† Ù‚Ø§Ø¦Ù…Ø© ÙØ±Ø§Ù†ÙƒÙ„ÙŠÙ† ÙˆØ§Ø´ØªØºÙ„ Ø¹Ù„ÙŠÙ‡Ø§ Ù‡Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹',
      'Ø§Ù‚Ø±Ø£ 30 Ø¯Ù‚ÙŠÙ‚Ø© ÙŠÙˆÙ…ÙŠØ§Ù‹ ÙÙŠ Ù…Ø¬Ø§Ù„ Ø¬Ø¯ÙŠØ¯ Ù…Ø§ ØªØ¹Ø±ÙÙ‡',
      'Ø§Ø¨Ø¯Ø£ Ù…Ø´Ø±ÙˆØ¹ Ø®Ø¯Ù…Ø© Ù…Ø¬ØªÙ…Ø¹ÙŠØ© ØµØºÙŠØ± ÙÙŠ Ø­ÙŠÙƒ',
      'Ø§ÙƒØªØ¨ Ø¬Ø¯ÙˆÙ„ ÙŠÙˆÙ…Ùƒ Ø¨Ø§Ù„ØªÙØµÙŠÙ„ ÙˆÙ‚ÙŠÙ‘Ù… Ø¥Ù†ØªØ§Ø¬ÙŠØªÙƒ ÙƒÙ„ Ù…Ø³Ø§Ø¡',
      'ØªØ¹Ù„Ù… Ù…Ù‡Ø§Ø±Ø© Ø¹Ù…Ù„ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø© (Ù†Ø¬Ø§Ø±Ø©ØŒ ÙƒÙ‡Ø±Ø¨Ø§Ø¡ØŒ Ø¨Ø±Ù…Ø¬Ø©)',
      'ÙˆÙÙ‘Ø± Ø¬Ø²Ø¡ Ù…Ù† Ø¯Ø®Ù„Ùƒ ÙˆØ§Ø³ØªØ«Ù…Ø±Ù‡ Ø¨Ø­ÙƒÙ…Ø© ÙÙŠ Ù…Ø´Ø±ÙˆØ¹ ØµØºÙŠØ±',
    ],
    'sd': [
      'Ø§Ø¨Ø¯Ø£ Ù…Ø´Ø±ÙˆØ¹Ùƒ Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠ Ø­ØªÙ‰ Ù„Ùˆ Ù…Ø§ ÙƒÙ†Øª Ù…Ø³ØªØ¹Ø¯ 100%',
      'Ø§Ø·Ù„Ø¨ Ù†ØµÙŠØ­Ø© Ù…Ù† Ø´Ø®Øµ Ù†Ø§Ø¬Ø­ ÙÙŠ Ù…Ø¬Ø§Ù„Ùƒ',
      'ØªÙ‚Ø¨Ù„ Ø§Ù„ÙØ´Ù„ ÙƒØ¬Ø²Ø¡ Ù…Ù† Ø§Ù„Ø±Ø­Ù„Ø© ÙˆØ§ÙƒØªØ¨ 3 Ø¯Ø±ÙˆØ³ ØªØ¹Ù„Ù…ØªÙ‡Ø§ Ù…Ù† ÙØ´Ù„ Ø³Ø§Ø¨Ù‚',
      'Ø§Ø¨Ù†ÙŠ Ø¹Ù„Ø§Ù‚Ø© Ù…Ø¹ Ø´Ø±ÙŠÙƒ Ø£Ùˆ ÙØ±ÙŠÙ‚ ÙŠÙƒÙ…Ù„ Ù†Ù‚Ø§Ø· Ø¶Ø¹ÙÙƒ',
      'Ø±ÙƒØ¶ Ø£Ùˆ Ù…Ø§Ø±Ø³ Ø±ÙŠØ§Ø¶Ø© ØªØ­Ø¨Ù‡Ø§ - Ø§Ù„Ø¬Ø³Ù… Ø§Ù„Ø³Ù„ÙŠÙ… ÙŠØ¯Ø¹Ù… Ø§Ù„Ø¹Ù‚Ù„',
      'Ù„Ø§ ØªØ³ØªØ³Ù„Ù… Ø¹Ù†Ø¯ Ø£ÙˆÙ„ Ø¹Ù‚Ø¨Ø©: Ø§Ø±Ø¬Ø¹ Ø­Ø§ÙˆÙ„ Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ø®ØªÙ„ÙØ©',
    ],
    'rol': [
      'ØªØ¹Ù„Ù… Ø§Ù„Ø¥Ù†ØµØ§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ: Ø§Ø³ØªÙ…Ø¹ Ù„Ø´Ø®Øµ Ø¨Ø¯ÙˆÙ† Ù…Ø§ ØªÙ‚Ø§Ø·Ø¹Ù‡',
      'Ø§ØªØ®Ø° Ù‚Ø±Ø§Ø± ÙˆØ§Ø­Ø¯ Ø¬Ø±ÙŠØ¡ ÙƒÙ†Øª ØªØ£Ø¬Ù„Ù‡ Ù…Ù† Ø²Ù…Ø§Ù†',
      'ÙƒÙ† Ù…ØªÙØ§Ø¦Ù„ Ø¨Ù†ÙŠØ©: Ø§Ø¨Ø¯Ø£ ÙƒÙ„ ÙŠÙˆÙ… Ø¨Ø°ÙƒØ± 3 Ø£Ø´ÙŠØ§Ø¡ Ø¥ÙŠØ¬Ø§Ø¨ÙŠØ©',
      'Ø§Ø¯Ø±Ø³ Ø§Ù„Ù…Ù†Ø§ÙØ³ÙŠÙ† ÙÙŠ Ù…Ø¬Ø§Ù„Ùƒ ÙˆØ­Ø¯Ø¯ ÙØ±ØµØ© Ù„Ù„ØªÙ…ÙŠØ²',
      'Ø§Ø³ØªØ«Ù…Ø± ÙÙŠ ØªØ·ÙˆÙŠØ± ÙØ±ÙŠÙ‚Ùƒ Ø£Ùˆ Ù…Ù† Ø­ÙˆÙ„Ùƒ',
      'Ø§Ø¹ØªØ±Ù Ø¨Ø®Ø·Ø£ ÙˆØ§Ø­Ø¯ Ø§Ø±ØªÙƒØ¨ØªÙ‡ ÙˆØµÙ„Ø­Ù‡ Ø¨Ø³Ø±Ø¹Ø©',
    ],
    'titan': [
      'Ø·Ø¨Ù‚ Ø§Ù„Ø§Ù†Ø¶Ø¨Ø§Ø· Ø§Ù„Ù…Ø§Ù„ÙŠ: ØªØªØ¨Ø¹ ÙƒÙ„ Ø±ÙŠØ§Ù„ ØªØµØ±ÙÙ‡ Ù„Ù…Ø¯Ø© Ø´Ù‡Ø±',
      'Ø§Ø¨Ø­Ø« Ø¹Ù† ÙØ±ØµØ© Ø§Ø³ØªØ«Ù…Ø§Ø±ÙŠØ© ÙŠØªØ¬Ø§Ù‡Ù„Ù‡Ø§ Ø§Ù„Ø¬Ù…ÙŠØ¹',
      'Ø§Ø¨Ù†ÙŠ Ø³Ù…Ø¹Ø© Ù‚ÙˆÙŠØ©: Ø®Ù„ ÙƒÙ„Ù…ØªÙƒ ØªÙƒÙˆÙ† ÙˆØ¹Ø¯Ùƒ',
      'ÙÙƒØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¯Ù‰ Ø§Ù„Ø·ÙˆÙŠÙ„: Ø®Ø·Ø· Ù„Ù€10-20 Ø³Ù†Ø© Ù‚Ø¯Ø§Ù…',
      'ØªØ¨Ø±Ø¹ Ø£Ùˆ Ø³Ø§Ù‡Ù… ÙÙŠ Ø¹Ù…Ù„ Ø®ÙŠØ±ÙŠ Ù…Ù†ØªØ¸Ù…',
      'ØªØ¹Ù„Ù… Ù…Ù† Ø£Ø®Ø·Ø§Ø¡ ØºÙŠØ±Ùƒ: Ø§Ù‚Ø±Ø£ Ø¹Ù† ÙØ´Ù„ Ø±Ø¬Ø§Ù„ Ø£Ø¹Ù…Ø§Ù„ Ù…Ø´Ù‡ÙˆØ±ÙŠÙ†',
    ],
    'wbba': [
      'Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø© Ù„Ø´Ø®Øµ ØªØ­Ø¨Ù‡ ØªØ¹Ø¨Ø± ÙÙŠÙ‡Ø§ Ø¹Ù† ØªÙ‚Ø¯ÙŠØ±Ùƒ',
      'Ø­Ø¯Ø¯ Ù‚ÙŠÙ…Ùƒ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©: Ù…Ø§ Ø§Ù„Ø£Ø´ÙŠØ§Ø¡ Ø§Ù„Ù„ÙŠ ØªØ¹Ø·ÙŠ Ø­ÙŠØ§ØªÙƒ Ù…Ø¹Ù†Ù‰ØŸ',
      'Ø§Ù‚Ø¶Ù ÙˆÙ‚Øª Ù†ÙˆØ¹ÙŠ Ù…Ø¹ Ø¹Ø§Ø¦Ù„ØªÙƒ Ø¨Ø¯ÙˆÙ† Ø¬ÙˆØ§Ù„Ø§Øª Ø£Ùˆ ØªØ´ØªÙŠØª',
      'Ø§Ø¨Ø¯Ø£ Ù…Ø´Ø±ÙˆØ¹ Ø¥Ø±Ø«: Ø´ÙŠØ¡ ÙŠØ¨Ù‚Ù‰ Ø¨Ø¹Ø¯Ùƒ (ÙƒØªØ§Ø¨ØŒ Ù…Ø´Ø±ÙˆØ¹ØŒ ØªØ¹Ù„ÙŠÙ…)',
      'Ø³Ø§Ù…Ø­ Ø´Ø®Øµ ÙƒÙ†Øª Ø²Ø¹Ù„Ø§Ù† Ù…Ù†Ù‡ - Ø§Ù„Ø­ÙŠØ§Ø© Ù‚ØµÙŠØ±Ø©',
      'Ø¹ÙŠØ´ Ø§Ù„Ù„Ø­Ø¸Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©: Ù…Ø§Ø±Ø³ Ø§Ù„Ø§Ù…ØªÙ†Ø§Ù† ÙŠÙˆÙ…ÙŠØ§Ù‹',
    ],
    'gl': [
      'Ø§ÙƒØªØ¨ ÙŠÙˆÙ…ÙŠØ§ØªÙƒ: Ø³Ø¬Ù„ Ø£ÙÙƒØ§Ø±Ùƒ ÙˆØªØ¬Ø§Ø±Ø¨Ùƒ ÙƒÙ„ ÙŠÙˆÙ…',
      'Ø³Ø§ÙØ± Ù„Ù…ÙƒØ§Ù† Ø¬Ø¯ÙŠØ¯ ØªÙ…Ø§Ù…Ø§Ù‹ Ù…Ø§ Ø²Ø±ØªÙ‡ Ù‚Ø¨Ù„',
      'Ø§Ø®Ø±Ø¬ Ù…Ù† Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø±Ø§Ø­Ø©: Ø¬Ø±Ø¨ Ø´ÙŠØ¡ ÙŠØ®ÙˆÙÙƒ Ù‡Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹',
      'Ø­ÙˆÙ„ "Ø§Ù„Ø¶ÙˆØ¡ Ø§Ù„Ø£Ø­Ù…Ø±" ÙÙŠ Ø­ÙŠØ§ØªÙƒ Ù„ÙØ±ØµØ© ØªØ¹Ù„Ù…',
      'ÙƒÙ† ØµØ§Ø¯Ù‚ Ù…Ø¹ Ù†ÙØ³Ùƒ: ÙˆØ´ ØªØ¨ÙŠ ÙØ¹Ù„Ø§Ù‹ Ù…Ùˆ ÙˆØ´ ÙŠØ¨ÙˆÙ† Ù…Ù†Ùƒ',
      'Ø§Ø¶Ø­Ùƒ Ø£ÙƒØ«Ø±: Ø´ÙˆÙ ÙÙŠÙ„Ù… ÙƒÙˆÙ…ÙŠØ¯ÙŠ Ø£Ùˆ Ø§Ù‚Ø¶Ù ÙˆÙ‚Øª Ù…Ø¹ Ù†Ø§Ø³ Ù…Ø±Ø­ÙŠÙ†',
    ],
    'cbs': [
      'Ø§Ù‚Ø±Ø£ Ø£Ø¯Ø¨ Ù…Ù† Ø«Ù‚Ø§ÙØ© Ù…Ø®ØªÙ„ÙØ© Ø¹Ù† Ø«Ù‚Ø§ÙØªÙƒ ÙƒÙ„ Ø´Ù‡Ø±',
      'Ø¯Ø§ÙØ¹ Ø¹Ù† Ø´Ø®Øµ ÙŠØªØ¹Ø±Ø¶ Ù„Ù„Ø¸Ù„Ù… Ø­ØªÙ‰ Ù„Ùˆ Ø¨Ø³ÙŠØ·',
      'Ø§ÙƒØªØ¨ Ù‚ØµØ© Ù…Ù† Ø·ÙÙˆÙ„ØªÙƒ ÙˆØ´ÙˆÙ ÙƒÙŠÙ Ø´ÙƒÙ„ØªÙƒ',
      'ØªØ¹Ù„Ù… Ù…Ù† ØªØ¬Ø§Ø±Ø¨ Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†: Ø§Ø³ØªÙ…Ø¹ Ù„Ù‚ØµØ© Ø­ÙŠØ§Ø© Ø´Ø®Øµ Ù…Ø®ØªÙ„Ù Ø¹Ù†Ùƒ',
      'Ø¹Ø¨Ù‘Ø± Ø¹Ù† Ù…Ø´Ø§Ø¹Ø±Ùƒ Ø¨Ø§Ù„ÙƒØªØ§Ø¨Ø© (Ù‚ØµØ©ØŒ Ø´Ø¹Ø±ØŒ ÙŠÙˆÙ…ÙŠØ§Øª)',
      'Ù‚Ø§ÙˆÙ… Ø§Ù„Ø¸Ù„Ù… Ø¨Ø§Ù„ØªØ¹Ù„ÙŠÙ…: Ø¹Ù„Ù‘Ù… Ø´Ø®Øµ Ù…Ù‡Ø§Ø±Ø© Ù…Ø¬Ø§Ù†Ø§Ù‹',
    ],
    // Pregnancy Planning
    'tcyf': [
      'Ø§Ø¨Ø¯Ø¦ÙŠ Ø¨ØªØªØ¨Ø¹ Ø¯ÙˆØ±ØªÙƒ Ø§Ù„Ø´Ù‡Ø±ÙŠØ© Ù„Ù…Ø¯Ø© 3 Ø´Ù‡ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„',
      'Ù‚ÙŠØ³ÙŠ Ø¯Ø±Ø¬Ø© Ø­Ø±Ø§Ø±Ø© Ø¬Ø³Ù…Ùƒ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ÙƒÙ„ ØµØ¨Ø§Ø­ Ù‚Ø¨Ù„ Ù…Ø§ ØªÙ‚ÙˆÙ…ÙŠ',
      'Ø±Ø§Ù‚Ø¨ÙŠ Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„ØªØ¨ÙˆÙŠØ¶: Ø§Ù„Ø¥ÙØ±Ø§Ø²Ø§Øª ÙˆØ£Ù„Ù… Ø§Ù„Ø¨Ø·Ù†',
      'Ø³Ø¬Ù„ÙŠ Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙƒ Ø§Ù„ÙŠÙˆÙ…ÙŠØ© ÙÙŠ ØªØ·Ø¨ÙŠÙ‚ Ø£Ùˆ Ø¯ÙØªØ± Ø®Ø§Øµ',
      'Ø­Ø¯Ø¯ÙŠ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø®ØµÙˆØ¨Ø© Ø§Ù„Ø®Ø§ØµØ© ÙÙŠÙƒ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ',
      'Ø´Ø§Ø±ÙƒÙŠ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù…Ø¹ Ø´Ø±ÙŠÙƒÙƒ Ø¹Ø´Ø§Ù† ØªØ®Ø·Ø·ÙˆÙ† Ø³ÙˆØ§',
    ],
    'iswe': [
      'ØªØ®Ù„ØµÙŠ Ù…Ù† Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø¨Ù„Ø§Ø³ØªÙŠÙƒÙŠØ© Ø§Ù„Ù„ÙŠ ÙÙŠÙ‡Ø§ BPA Ù…Ù† Ù…Ø·Ø¨Ø®Ùƒ',
      'Ø§Ø¨Ø¯Ø¦ÙŠ Ø¨Ø£Ø®Ø° Ù…ÙƒÙ…Ù„ CoQ10 Ø¨Ø¹Ø¯ Ø§Ø³ØªØ´Ø§Ø±Ø© Ø·Ø¨ÙŠØ¨Ùƒ',
      'ØºÙŠÙ‘Ø±ÙŠ Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„ØªÙ†Ø¸ÙŠÙ Ù„Ø¨Ø¯Ø§Ø¦Ù„ Ø·Ø¨ÙŠØ¹ÙŠØ© Ø®Ø§Ù„ÙŠØ© Ù…Ù† Ø§Ù„ÙƒÙŠÙ…Ø§ÙˆÙŠØ§Øª',
      'Ø­Ø³Ù‘Ù†ÙŠ Ù†Ø¸Ø§Ù…Ùƒ Ø§Ù„ØºØ°Ø§Ø¦ÙŠ: Ø£ÙƒØ«Ø±ÙŠ Ù…Ù† Ø§Ù„Ø®Ø¶Ø§Ø± ÙˆØ§Ù„Ø¨Ø±ÙˆØªÙŠÙ† ÙˆØ§Ù„Ø£ÙˆÙ…ÙŠØºØ§ 3',
      'Ù†Ø§Ù…ÙŠ 7-8 Ø³Ø§Ø¹Ø§Øª ÙŠÙˆÙ…ÙŠØ§Ù‹ ÙˆØ­Ø§ÙØ¸ÙŠ Ø¹Ù„Ù‰ Ø±ÙˆØªÙŠÙ† Ù†ÙˆÙ… Ø«Ø§Ø¨Øª',
      'Ù‚Ù„Ù„ÙŠ Ø§Ù„ØªÙˆØªØ± Ø¨Ù…Ù…Ø§Ø±Ø³Ø© Ø§Ù„ÙŠÙˆØºØ§ Ø£Ùˆ Ø§Ù„ØªØ£Ù…Ù„ ÙŠÙˆÙ…ÙŠØ§Ù‹',
    ],
    'af': [
      'Ø¬Ø±Ø¨ÙŠ ÙˆØµÙØ© ÙˆØ§Ø­Ø¯Ø© Ù…Ù† ÙˆØµÙØ§Øª Ø§Ù„Ø®ØµÙˆØ¨Ø© Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠØ© Ù‡Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹',
      'Ø®ØµØµÙŠ 15 Ø¯Ù‚ÙŠÙ‚Ø© ÙŠÙˆÙ…ÙŠØ§Ù‹ Ù„Ù„ØªØ£Ù…Ù„ ÙˆØ§Ù„ÙˆØ¹ÙŠ Ø§Ù„Ø°Ø§ØªÙŠ',
      'Ø¬Ø±Ø¨ÙŠ Ø´Ø§ÙŠ Ø§Ù„Ø£Ø¹Ø´Ø§Ø¨ Ø§Ù„Ù…Ø¹Ø²Ø² Ù„Ù„Ø®ØµÙˆØ¨Ø© (Ø¨Ø¹Ø¯ Ø§Ø³ØªØ´Ø§Ø±Ø© Ø·Ø¨ÙŠØ¨)',
      'Ù…Ø§Ø±Ø³ÙŠ ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„ØªÙ†ÙØ³ Ø§Ù„Ø¹Ù…ÙŠÙ‚ ÙƒÙ„ ØµØ¨Ø§Ø­',
      'Ø§ÙƒØªØ¨ÙŠ ÙŠÙˆÙ…ÙŠØ§ØªÙƒ Ø¹Ù† Ù…Ø´Ø§Ø¹Ø±Ùƒ ÙˆØ±Ø­Ù„ØªÙƒ Ù†Ø­Ùˆ Ø§Ù„Ø£Ù…ÙˆÙ…Ø©',
      'Ø­Ø¶Ù‘Ø±ÙŠ ÙˆØ¬Ø¨Ø© ØµØ­ÙŠØ© ÙˆØ§Ø¹ÙŠØ© Ù…Ø¹ Ø´Ø±ÙŠÙƒÙƒ Ù…Ø±Ø© Ø¨Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹',
    ],
    'iwg': [
      'Ù„Ø§ ØªØ®Ù„ÙŠ Ø§Ù„Ù‚Ù„Ù‚ ÙŠØ³ÙŠØ·Ø± Ø¹Ù„ÙŠÙƒ: Ø±ÙƒØ²ÙŠ Ø¹Ù„Ù‰ Ù…Ø§ ØªÙ‚Ø¯Ø±ÙŠÙ† ØªØªØ­ÙƒÙ…ÙŠ ÙÙŠÙ‡',
      'ØªØ­Ù‚Ù‚ÙŠ Ù…Ù† Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ© Ù…Ù† Ù…ØµØ§Ø¯Ø± Ø¹Ù„Ù…ÙŠØ© Ù…ÙˆØ«ÙˆÙ‚Ø©',
      'Ù„Ø§ ØªØµØ¯Ù‚ÙŠ ÙƒÙ„ Ù…Ø§ ÙŠÙÙ‚Ø§Ù„ Ø¹Ù† Ø§Ù„Ø¹Ù…Ø± ÙˆØ§Ù„Ø®ØµÙˆØ¨Ø©',
      'Ù…Ø§Ø±Ø³ÙŠ Ù†Ø´Ø§Ø· Ø¨Ø¯Ù†ÙŠ Ù…Ø¹ØªØ¯Ù„ 30 Ø¯Ù‚ÙŠÙ‚Ø© ÙŠÙˆÙ…ÙŠØ§Ù‹',
      'Ø±Ø§Ø¬Ø¹ÙŠ Ø·Ø¨ÙŠØ¨Ùƒ Ù„Ù„ÙØ­ÙˆØµØ§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ù‚Ø¨Ù„ Ù…Ø§ ØªØ¨Ø¯Ø¦ÙŠ',
      'ÙƒÙˆÙ†ÙŠ ØµØ¨ÙˆØ±Ø©: Ù…Ø¹Ø¸Ù… Ø§Ù„Ø£Ø²ÙˆØ§Ø¬ ÙŠØ­ØªØ§Ø¬ÙˆÙ† 6-12 Ø´Ù‡Ø±',
    ],
    'wbww': [
      'Ø§Ø³ØªÙ…Ø¹ÙŠ Ù„Ø¬Ø³Ù…Ùƒ: Ø³Ø¬Ù„ÙŠ Ø£ÙŠ Ø£Ø¹Ø±Ø§Ø¶ ØºÙŠØ± Ø¹Ø§Ø¯ÙŠØ©',
      'Ø§Ø¹Ù…Ù„ÙŠ ÙØ­Øµ Ø³Ù†ÙˆÙŠ Ø´Ø§Ù…Ù„ Ø¹Ù†Ø¯ Ø·Ø¨ÙŠØ¨Ø© Ø§Ù„Ù†Ø³Ø§Ø¡',
      'ØªØ¹Ù„Ù…ÙŠ Ø¹Ù† Ù‡Ø±Ù…ÙˆÙ†Ø§ØªÙƒ ÙˆÙƒÙŠÙ ØªØ¤Ø«Ø± Ø¹Ù„Ù‰ ØµØ­ØªÙƒ',
      'Ù…Ø§Ø±Ø³ÙŠ Ø§Ù„Ø±Ø¹Ø§ÙŠØ© Ø§Ù„Ø°Ø§ØªÙŠØ©: Ø®ØµØµÙŠ ÙˆÙ‚Øª Ù„Ù†ÙØ³Ùƒ Ø£Ø³Ø¨ÙˆØ¹ÙŠØ§Ù‹',
      'Ø§Ù‚Ø±Ø¦ÙŠ Ø¹Ù† ØµØ­Ø© Ø§Ù„Ø«Ø¯ÙŠ ÙˆØ·Ø±Ù‚ Ø§Ù„ÙØ­Øµ Ø§Ù„Ø°Ø§ØªÙŠ',
      'ØªØ­Ø¯Ø«ÙŠ Ø¨ØµØ±Ø§Ø­Ø© Ù…Ø¹ Ø·Ø¨ÙŠØ¨ØªÙƒ Ø¹Ù† Ø£ÙŠ Ù…Ø®Ø§ÙˆÙ ØµØ­ÙŠØ©',
    ],
    'tfd': [
      'Ø£Ø¶ÙŠÙÙŠ Ø­Ù…Ø¶ Ø§Ù„ÙÙˆÙ„ÙŠÙƒ Ù„Ù†Ø¸Ø§Ù…Ùƒ Ø§Ù„ØºØ°Ø§Ø¦ÙŠ Ø§Ù„ÙŠÙˆÙ…ÙŠ',
      'ÙƒÙ„ÙŠ Ø³Ù…Ùƒ Ø£ÙˆÙ…ÙŠØºØ§ 3 Ù…Ø±ØªÙŠÙ† Ø¨Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„',
      'Ù‚Ù„Ù„ÙŠ Ù…Ù† Ø§Ù„Ø³ÙƒØ±ÙŠØ§Øª Ø§Ù„Ù…ØµÙ†Ø¹Ø© ÙˆØ§Ù„Ø£Ø·Ø¹Ù…Ø© Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©',
      'Ø§Ø´Ø±Ø¨ÙŠ 8 Ø£ÙƒÙˆØ§Ø¨ Ù…Ø§Ø¡ ÙŠÙˆÙ…ÙŠØ§Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„',
      'Ø®Ø·Ø·ÙŠ ÙˆØ¬Ø¨Ø§ØªÙƒ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠØ© Ù…Ù‚Ø¯Ù…Ø§Ù‹ Ù…Ø¹ Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø§Ù„ØªÙ†ÙˆØ¹',
      'Ø§Ø³ØªØ´ÙŠØ±ÙŠ Ø£Ø®ØµØ§Ø¦ÙŠØ© ØªØºØ°ÙŠØ© Ù„Ø®Ø·Ø© Ù…Ø®ØµØµØ© Ù„ÙˆØ¶Ø¹Ùƒ',
    ],
    'ef': [
      'Ø§ÙƒØªØ¨ÙŠ Ù…Ø´Ø§Ø¹Ø±Ùƒ Ø¹Ù† Ø±Ø­Ù„Ø© Ø§Ù„Ø®ØµÙˆØ¨Ø© Ø¨Ø¯ÙˆÙ† Ø­ÙƒÙ… Ø¹Ù„Ù‰ Ù†ÙØ³Ùƒ',
      'ØªØ­Ø¯Ø«ÙŠ Ù…Ø¹ Ø´Ø±ÙŠÙƒÙƒ Ø¨ØµØ±Ø§Ø­Ø© Ø¹Ù† Ù…Ø®Ø§ÙˆÙÙƒÙ… ÙˆØ¢Ù…Ø§Ù„ÙƒÙ…',
      'Ø§Ù†Ø¶Ù…ÙŠ Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø¯Ø¹Ù… Ù„Ù„Ù†Ø³Ø§Ø¡ Ø§Ù„Ù„ÙŠ ÙŠÙ…Ø±ÙˆÙ† Ø¨Ù†ÙØ³ Ø§Ù„ØªØ¬Ø±Ø¨Ø©',
      'Ø®Ø°ÙŠ Ø§Ø³ØªØ±Ø§Ø­Ø© Ù…Ù† Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ù…ÙØ±Ø· Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª',
      'Ù…Ø§Ø±Ø³ÙŠ ØªÙ…Ø±ÙŠÙ† ÙˆØ§Ø­Ø¯ Ù…Ù† ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„Ø§Ø³ØªØ±Ø®Ø§Ø¡ ÙŠÙˆÙ…ÙŠØ§Ù‹',
      'Ø°ÙƒÙ‘Ø±ÙŠ Ù†ÙØ³Ùƒ Ø¥Ù† Ù…Ø´Ø§Ø¹Ø±Ùƒ Ø·Ø¨ÙŠØ¹ÙŠØ© ÙˆÙ…Ù‚Ø¨ÙˆÙ„Ø©',
    ],
    'tft': [
      'Ø¬Ù‡Ø²ÙŠ "Ø®Ø·Ø© Ù…Ø§ Ø¨Ø¹Ø¯ Ø§Ù„ÙˆÙ„Ø§Ø¯Ø©" Ù…Ù† Ø§Ù„Ø­ÙŠÙ† Ù‚Ø¨Ù„ Ø§Ù„ÙˆÙ„Ø§Ø¯Ø©',
      'Ø±ØªØ¨ÙŠ Ù†Ø¸Ø§Ù… Ø¯Ø¹Ù…: Ø­Ø¯Ø¯ÙŠ Ù…Ù† ÙŠÙ‚Ø¯Ø± ÙŠØ³Ø§Ø¹Ø¯Ùƒ Ø¨Ø¹Ø¯ Ø§Ù„ÙˆÙ„Ø§Ø¯Ø©',
      'Ø¬Ù‡Ø²ÙŠ ÙˆØ¬Ø¨Ø§Øª ØµØ­ÙŠØ© Ù…Ø¬Ù…Ø¯Ø© Ù‚Ø¨Ù„ Ù…ÙˆØ¹Ø¯ Ø§Ù„ÙˆÙ„Ø§Ø¯Ø©',
      'ØªØ¹Ù„Ù…ÙŠ Ø¹Ù† ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¬Ø³Ù… Ø¨Ø¹Ø¯ Ø§Ù„ÙˆÙ„Ø§Ø¯Ø© Ø¹Ø´Ø§Ù† Ù…Ø§ ØªÙØ§Ø¬Ø¦Ùƒ',
      'Ù†Ø§Ù‚Ø´ÙŠ Ù…Ø¹ Ø´Ø±ÙŠÙƒÙƒ ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ù‡Ø§Ù… Ø¨Ø¹Ø¯ Ù…Ø¬ÙŠØ¡ Ø§Ù„Ø·ÙÙ„',
      'Ø­Ø¶Ù‘Ø±ÙŠ Ù…ÙƒØ§Ù† Ù…Ø±ÙŠØ­ Ù„Ù„Ø±Ø¶Ø§Ø¹Ø© ÙˆØ§Ù„Ø§Ø³ØªØ±Ø®Ø§Ø¡',
    ],
    'prm': [
      'Ø³Ø¬Ù„ÙŠ ØªÙØ§ØµÙŠÙ„ Ø¯ÙˆØ±ØªÙƒ Ø§Ù„Ø´Ù‡Ø±ÙŠØ© Ù„Ù…Ø¯Ø© 3 Ø´Ù‡ÙˆØ± Ù…ØªØªØ§Ù„ÙŠØ©',
      'Ù‚Ù„Ù„ÙŠ Ù…Ù† Ø§Ù„Ø£Ø·Ø¹Ù…Ø© Ø§Ù„Ù…Ø³Ø¨Ø¨Ø© Ù„Ù„Ø§Ù„ØªÙ‡Ø§Ø¨ (Ø³ÙƒØ±ØŒ Ø·Ø­ÙŠÙ† Ø£Ø¨ÙŠØ¶)',
      'Ù…Ø§Ø±Ø³ÙŠ Ø±ÙŠØ§Ø¶Ø© Ù…Ø¹ØªØ¯Ù„Ø© Ø¨Ø§Ù†ØªØ¸Ø§Ù… Ù„ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ù‡Ø±Ù…ÙˆÙ†Ø§Øª',
      'Ù†Ø§Ù…ÙŠ ÙÙŠ Ø¸Ù„Ø§Ù… ØªØ§Ù… ÙˆØ§Ø­ØªØ±Ù…ÙŠ Ø¥ÙŠÙ‚Ø§Ø¹Ùƒ Ø§Ù„Ø¨ÙŠÙˆÙ„ÙˆØ¬ÙŠ',
      'Ø¬Ø±Ø¨ÙŠ Ù…ÙƒÙ…Ù„Ø§Øª Ø§Ù„Ù…ØºÙ†ÙŠØ³ÙŠÙˆÙ… (Ø¨Ø¹Ø¯ Ø§Ø³ØªØ´Ø§Ø±Ø© Ø·Ø¨ÙŠØ¨)',
      'Ø±Ø§Ø¬Ø¹ÙŠ Ø·Ø¨ÙŠØ¨Ø© Ù…Ø®ØªØµØ© Ø¥Ø°Ø§ Ø¯ÙˆØ±ØªÙƒ ØºÙŠØ± Ù…Ù†ØªØ¸Ù…Ø© Ù„Ø£ÙƒØ«Ø± Ù…Ù† 3 Ø´Ù‡ÙˆØ±',
    ],
    'cpg': [
      'Ø§Ø¬Ù„Ø³ÙˆØ§ Ø³ÙˆØ§ ÙˆØ§ÙƒØªØ¨ÙˆØ§ Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø£Ù‡Ø¯Ø§ÙÙƒÙ… Ø§Ù„Ù…Ø´ØªØ±ÙƒØ© Ù„Ù„Ø£Ø¨ÙˆØ©',
      'Ù†Ø§Ù‚Ø´ÙˆØ§ Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ø·ÙÙ„ ÙˆØ§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©',
      'Ø§ØªÙÙ‚ÙˆØ§ Ø¹Ù„Ù‰ ÙÙ„Ø³ÙØ© Ø§Ù„ØªØ±Ø¨ÙŠØ© Ù‚Ø¨Ù„ Ù…Ø¬ÙŠØ¡ Ø§Ù„Ø·ÙÙ„',
      'Ù…Ø§Ø±Ø³ÙˆØ§ ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„ØªÙˆØ§ØµÙ„: Ø§Ø³ØªÙ…Ø¹ Ù„Ø´Ø±ÙŠÙƒÙƒ 5 Ø¯Ù‚Ø§Ø¦Ù‚ Ø¨Ø¯ÙˆÙ† Ù…Ù‚Ø§Ø·Ø¹Ø©',
      'Ø§Ø¹Ù…Ù„ÙˆØ§ ÙØ­ÙˆØµØ§Øª ØµØ­ÙŠØ© Ù„Ù„Ø²ÙˆØ¬ÙŠÙ† Ù‚Ø¨Ù„ Ø§Ù„Ø¨Ø¯Ø¡',
      'Ø®ØµØµÙˆØ§ Ù…ÙˆØ¹Ø¯ Ø£Ø³Ø¨ÙˆØ¹ÙŠ Ù„Ù„Ø²ÙˆØ¬ÙŠÙ† ÙÙ‚Ø· Ø¨Ø¯ÙˆÙ† Ø¬ÙˆØ§Ù„Ø§Øª',
    ],
    // Fatherhood
    'tef': [
      'Ø§Ø­Ø¶Ø± Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ø·Ø¨ÙŠØ¨ Ù…Ø¹ Ø²ÙˆØ¬ØªÙƒ Ù‚Ø¯Ø± Ø§Ù„Ø¥Ù…ÙƒØ§Ù†',
      'Ø§Ù‚Ø±Ø£ Ø¹Ù† Ù…Ø±Ø§Ø­Ù„ Ø§Ù„Ø­Ù…Ù„ Ø´Ù‡Ø± Ø¨Ø´Ù‡Ø± Ø¹Ø´Ø§Ù† ØªÙÙ‡Ù… ÙˆØ´ ÙŠØµÙŠØ±',
      'Ø¬Ù‡Ø² Ø­Ù‚ÙŠØ¨Ø© Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰ Ù…Ø¹ Ø²ÙˆØ¬ØªÙƒ Ù‚Ø¨Ù„ Ø§Ù„ÙˆÙ„Ø§Ø¯Ø© Ø¨Ø´Ù‡Ø±',
      'ØªØ¹Ù„Ù… Ø£Ø³Ø§Ø³ÙŠØ§Øª ØªØºÙŠÙŠØ± Ø§Ù„Ø­ÙØ§Ø¶Ø§Øª ÙˆØ§Ù„Ø§Ø³ØªØ­Ù…Ø§Ù… Ù„Ù„Ø±Ø¶ÙŠØ¹',
      'Ø§Ø¨Ø¯Ø£ Ø¨ØªØ¬Ù‡ÙŠØ² ØºØ±ÙØ© Ø§Ù„Ø·ÙÙ„ ÙˆÙ…Ø³ØªÙ„Ø²Ù…Ø§ØªÙ‡ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©',
      'ØªØ­Ø¯Ø« Ù…Ø¹ Ø¢Ø¨Ø§Ø¡ Ø¢Ø®Ø±ÙŠÙ† ÙˆØ§Ø³Ø£Ù„Ù‡Ù… Ø¹Ù† ØªØ¬Ø±Ø¨ØªÙ‡Ù…',
    ],
    'tnf': [
      'Ø®ØµØµ 30 Ø¯Ù‚ÙŠÙ‚Ø© ÙŠÙˆÙ…ÙŠØ§Ù‹ Ù„Ù„Ø¹Ø¨ ÙˆØ§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø·ÙÙ„Ùƒ',
      'Ø´Ø§Ø±Ùƒ ÙÙŠ Ø§Ù„Ø±Ø¶Ø¹Ø§Øª Ø§Ù„Ù„ÙŠÙ„ÙŠØ© Ø­ØªÙ‰ Ù„Ùˆ Ø¨Ø§Ù„ØªÙ†Ø§ÙˆØ¨',
      'Ø³Ø¬Ù„ Ù…Ø±Ø§Ø­Ù„ Ù†Ù…Ùˆ Ø·ÙÙ„Ùƒ: Ø§Ù„Ø§Ø¨ØªØ³Ø§Ù…Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ØŒ Ø§Ù„ÙƒÙ„Ù…Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰',
      'ØªØ¹Ù„Ù… Ù‚Ø±Ø§Ø¡Ø© Ø¥Ø´Ø§Ø±Ø§Øª Ø·ÙÙ„Ùƒ: Ø¬ÙˆØ¹Ø§Ù†ØŒ ØªØ¹Ø¨Ø§Ù†ØŒ ÙŠØ¨ÙŠ ÙŠÙ„Ø¹Ø¨',
      'Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ø¹Ù„Ø§Ù‚ØªÙƒ Ø¨Ø²ÙˆØ¬ØªÙƒ: Ø®ØµØµÙˆØ§ ÙˆÙ‚Øª Ù„Ù„Ø²ÙˆØ¬ÙŠÙ†',
      'Ù„Ø§ ØªØ®Ø§Ù ØªØ·Ù„Ø¨ Ù…Ø³Ø§Ø¹Ø¯Ø©: Ø§Ù„Ø£Ø¨ÙˆØ© Ù…Ùˆ Ø³Ù‡Ù„Ø© Ø¹Ù„Ù‰ Ø£Ø­Ø¯',
    ],
    'tbp': [
      'Ø§Ø­Ø¶Ø± Ø¯ÙˆØ±Ø© ØªØ­Ø¶ÙŠØ±ÙŠØ© Ù„Ù„ÙˆÙ„Ø§Ø¯Ø© Ù…Ø¹ Ø²ÙˆØ¬ØªÙƒ',
      'ØªØ¹Ù„Ù… ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„ØªÙ†ÙØ³ ÙˆØ§Ù„ØªØ¯Ù„ÙŠÙƒ Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ø²ÙˆØ¬ØªÙƒ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ÙˆÙ„Ø§Ø¯Ø©',
      'Ø¬Ù‡Ø² Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø£Ø³Ø¦Ù„ØªÙƒ Ù„Ù„Ø·Ø¨ÙŠØ¨ Ù‚Ø¨Ù„ Ù…ÙˆØ¹Ø¯ Ø§Ù„ÙˆÙ„Ø§Ø¯Ø©',
      'ÙƒÙ† ØµÙˆØª Ø²ÙˆØ¬ØªÙƒ ÙÙŠ ØºØ±ÙØ© Ø§Ù„ÙˆÙ„Ø§Ø¯Ø© Ø¥Ø°Ø§ Ø§Ø­ØªØ§Ø¬Øª',
      'Ø§ØªÙÙ‚ Ù…Ø¹ Ø²ÙˆØ¬ØªÙƒ Ø¹Ù„Ù‰ Ø®Ø·Ø© Ø§Ù„ÙˆÙ„Ø§Ø¯Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø©',
      'ÙƒÙ† Ø­Ø§Ø¶Ø±Ø§Ù‹ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„: Ø£ØºÙ„Ù‚ Ø§Ù„Ø¬ÙˆØ§Ù„ ÙˆØ±ÙƒØ² Ø¹Ù„ÙŠÙ‡Ø§',
    ],
    'bp': [
      'ØªØ¯Ø±Ø¨ Ø¹Ù„Ù‰ ØªØºÙŠÙŠØ± Ø§Ù„Ø­ÙØ§Ø¶ Ù‚Ø¨Ù„ Ù…Ø§ ÙŠØ¬ÙŠ Ø§Ù„Ø·ÙÙ„ (Ø§Ø³ØªØ®Ø¯Ù… Ø¯Ù…ÙŠØ©)',
      'ØªØ¹Ù„Ù… ÙƒÙŠÙ ØªÙ„Ù Ø§Ù„Ø·ÙÙ„ Ø¨Ø§Ù„Ø¨Ø·Ø§Ù†ÙŠØ© Ø¨Ø·Ø±ÙŠÙ‚Ø© Ø¢Ù…Ù†Ø©',
      'Ø¬Ù‡Ø² Ø­Ù‚ÙŠØ¨Ø© Ø·ÙˆØ§Ø±Ø¦ Ù„Ù„Ø·ÙÙ„ ÙÙŠ Ø§Ù„Ø³ÙŠØ§Ø±Ø© ÙˆØ§Ù„Ø¨ÙŠØª',
      'ØªØ¹Ù„Ù… Ø§Ù„Ø¥Ø³Ø¹Ø§ÙØ§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ© Ù„Ù„Ø±Ø¶Ø¹',
      'Ø§ØµÙ†Ø¹ Ø±ÙˆØªÙŠÙ† Ù…Ø¹ Ø·ÙÙ„Ùƒ: Ù‚ØµØ© Ù‚Ø¨Ù„ Ø§Ù„Ù†ÙˆÙ…ØŒ Ø£ØºÙ†ÙŠØ© Ø®Ø§ØµØ©',
      'Ø§Ø³ØªÙ…ØªØ¹ Ø¨Ø§Ù„Ù„Ø­Ø¸Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© ÙˆÙ„Ø§ ØªØ¶ØºØ· Ø¹Ù„Ù‰ Ù†ÙØ³Ùƒ',
    ],
    'ndsg': [
      'Ù„Ø§ ØªÙ‚Ø§Ø±Ù† Ù†ÙØ³Ùƒ Ø¨Ø§Ù„Ø¢Ø¨Ø§Ø¡ Ø§Ù„Ø«Ø§Ù†ÙŠÙŠÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙˆØ´Ù„ Ù…ÙŠØ¯ÙŠØ§',
      'Ù†Ù… ÙƒÙ„ Ù…Ø§ Ø³Ù†Ø­Øª Ù„Ùƒ Ø§Ù„ÙØ±ØµØ©: Ø§Ù„Ù†ÙˆÙ… Ù…Ùˆ Ø±ÙØ§Ù‡ÙŠØ©',
      'ØªÙ‚Ø¨Ù„ Ø¥Ù†Ùƒ Ø¨ØªØºÙ„Ø· ÙˆÙ‡Ø°Ø§ Ø·Ø¨ÙŠØ¹ÙŠ ÙˆÙ…ØªÙˆÙ‚Ø¹',
      'ÙƒÙˆÙ‘Ù† ØµØ¯Ø§Ù‚Ø§Øª Ù…Ø¹ Ø¢Ø¨Ø§Ø¡ Ø¬Ø¯Ø¯ ÙŠÙÙ‡Ù…ÙˆÙ† ÙˆØ¶Ø¹Ùƒ',
      'Ø­Ø§ÙØ¸ Ø¹Ù„Ù‰ Ù‡ÙˆØ§ÙŠØ© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ø¹Ø´Ø§Ù† ØµØ­ØªÙƒ Ø§Ù„Ù†ÙØ³ÙŠØ©',
      'ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø²ÙˆØ¬ØªÙƒ ÙŠÙˆÙ…ÙŠØ§Ù‹ Ø­ØªÙ‰ Ù„Ùˆ 10 Ø¯Ù‚Ø§Ø¦Ù‚ ÙÙ‚Ø·',
    ],
    'tde': [
      'ØªØ¯Ø±Ø¨ Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ø¯ Ø¥Ù„Ù‰ 10 Ù‚Ø¨Ù„ Ù…Ø§ ØªØ±Ø¯ Ø¨Ø¹ØµØ¨ÙŠØ© Ø¹Ù„Ù‰ Ø·ÙÙ„Ùƒ',
      'Ø§ØªØ±Ùƒ Ø§Ù„Ø¬ÙˆØ§Ù„ ÙˆÙƒÙ† Ø­Ø§Ø¶Ø±Ø§Ù‹ 100% ÙˆÙ‚Øª Ø§Ù„Ù„Ø¹Ø¨ Ù…Ø¹ Ø£Ø·ÙØ§Ù„Ùƒ',
      'Ø§ØµÙ†Ø¹ Ø°ÙƒØ±Ù‰ ÙˆØ§Ø­Ø¯Ø© Ù…Ù…ÙŠØ²Ø© Ù…Ø¹ Ø·ÙÙ„Ùƒ ÙƒÙ„ Ø£Ø³Ø¨ÙˆØ¹',
      'Ø§Ø³Ø£Ù„ Ø·ÙÙ„Ùƒ Ø¹Ù† ÙŠÙˆÙ…Ù‡ ÙˆØ§Ø³ØªÙ…Ø¹ Ø¨Ø¬Ø¯ ÙˆØ§Ù†ØªØ¨Ø§Ù‡',
      'Ù…Ø§Ø±Ø³ Ø§Ù„Ø±ÙŠØ§Ø¶Ø© Ø¨Ø§Ù†ØªØ¸Ø§Ù…: Ø¬Ø³Ù…Ùƒ ÙˆØ¹Ù‚Ù„Ùƒ ÙŠØ­ØªØ§Ø¬ÙˆÙ† Ø§Ù„Ø·Ø§Ù‚Ø©',
      'Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø© Ø­Ø¨ Ù„ÙƒÙ„ Ø·ÙÙ„ Ù…Ù† Ø£Ø·ÙØ§Ù„Ùƒ',
    ],
    'dad': [
      'Ø®ØµØµ ÙˆÙ‚Øª ÙØ±Ø¯ÙŠ Ù…Ø¹ ÙƒÙ„ Ø·ÙÙ„ Ø¹Ù„Ù‰ Ø­Ø¯Ø© ÙƒÙ„ Ø£Ø³Ø¨ÙˆØ¹',
      'ÙƒÙ† Ø§Ù„Ù‚Ø¯ÙˆØ©: Ø£Ø¸Ù‡Ø± Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ù„ÙŠ ØªØ¨ÙŠ ØªØ´ÙˆÙÙ‡Ø§ ÙÙŠ Ø£Ø·ÙØ§Ù„Ùƒ',
      'Ø§Ø¹ØªØ°Ø± Ù„Ø£Ø·ÙØ§Ù„Ùƒ Ù„Ù…Ø§ ØªØºÙ„Ø· â€” Ù‡Ø°ÙŠ Ù‚ÙˆØ© Ù…Ùˆ Ø¶Ø¹Ù',
      'Ø§Ù‚Ø±Ø£ Ù„Ø£Ø·ÙØ§Ù„Ùƒ Ù‚Ø¨Ù„ Ø§Ù„Ù†ÙˆÙ… ÙƒÙ„ Ù„ÙŠÙ„Ø©',
      'Ø¹Ù„Ù‘Ù… Ø£Ø·ÙØ§Ù„Ùƒ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø¹Ø§Ø·ÙÙŠ: Ø³Ù…Ù‘ÙŠ Ø§Ù„Ù…Ø´Ø§Ø¹Ø± ÙˆÙ†Ø§Ù‚Ø´Ù‡Ø§',
      'Ø§Ø­ÙƒÙ Ù„Ø£Ø·ÙØ§Ù„Ùƒ Ø¹Ù† Ø·ÙÙˆÙ„ØªÙƒ ÙˆØªØ¬Ø§Ø±Ø¨Ùƒ Ø¨ØµØ¯Ù‚',
    ],
    'sfsd': [
      'Ø®ØµØµÙŠ ÙˆÙ‚Øª Ø£Ø³Ø¨ÙˆØ¹ÙŠ "Ù…ÙˆØ¹Ø¯ Ù…Ø¹ Ø¨Ø§Ø¨Ø§" Ù„Ø¨Ù†ØªÙƒ ÙÙ‚Ø·',
      'Ø§Ø³ØªÙ…Ø¹ Ù„Ø¨Ù†ØªÙƒ Ø¨Ø¯ÙˆÙ† Ù…Ø§ ØªØ­ÙƒÙ… Ø£Ùˆ ØªØ­Ù„ Ù…Ø´Ø§ÙƒÙ„Ù‡Ø§ Ù…Ø¨Ø§Ø´Ø±Ø©',
      'ÙƒÙ† Ø­Ø§Ø¶Ø±Ø§Ù‹ ÙÙŠ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø§Øª Ø§Ù„Ù…Ù‡Ù…Ø© Ù„Ù‡Ø§ Ù…Ù‡Ù…Ø§ ÙƒØ§Ù†Øª ØµØºÙŠØ±Ø©',
      'Ø¹Ø¨Ù‘Ø± Ù„Ø¨Ù†ØªÙƒ Ø¹Ù† Ø­Ø¨Ùƒ ÙˆÙØ®Ø±Ùƒ ÙÙŠÙ‡Ø§ Ø¨Ø§Ù„ÙƒÙ„Ø§Ù…',
      'Ø¹Ù„Ù‘Ù… Ø¨Ù†ØªÙƒ Ø§Ù„Ø«Ù‚Ø© Ø¨Ø§Ù„Ù†ÙØ³ Ø¨ØªØ´Ø¬ÙŠØ¹Ù‡Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©',
      'ÙƒÙ† Ø§Ù„Ù…Ø«Ø§Ù„ Ù„Ù„Ø±Ø¬Ù„ Ø§Ù„Ù„ÙŠ ØªØªÙ…Ù†Ø§Ù‡ Ù„Ø¨Ù†ØªÙƒ Ø¨Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„',
    ],
    'bdss': [
      'Ø´Ø§Ø±Ùƒ Ø§Ø¨Ù†Ùƒ ÙÙŠ Ù†Ø´Ø§Ø· Ø¨Ø¯Ù†ÙŠ Ø£Ùˆ Ù…ØºØ§Ù…Ø±Ø© Ù…Ø±Ø© Ø¨Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹',
      'Ø¹Ù„Ù‘Ù… Ø§Ø¨Ù†Ùƒ ÙŠØªØ­Ù…Ù„ Ù…Ø³Ø¤ÙˆÙ„ÙŠØ© Ø£ÙØ¹Ø§Ù„Ù‡ Ù…Ù† ØµØºØ±Ù‡',
      'Ù†Ø§Ù‚Ø´ Ù…Ø¹ Ø§Ø¨Ù†Ùƒ Ù…Ø¹Ù†Ù‰ Ø§Ù„Ø±Ø¬ÙˆÙ„Ø© Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©: Ø§Ù„Ø§Ø­ØªØ±Ø§Ù… ÙˆØ§Ù„Ù†Ø²Ø§Ù‡Ø©',
      'Ø®Ù„ Ø§Ø¨Ù†Ùƒ ÙŠØ´ÙˆÙÙƒ ØªØ¹ØªØ±Ù Ø¨Ø£Ø®Ø·Ø§Ø¦Ùƒ ÙˆØªØµÙ„Ø­Ù‡Ø§',
      'Ø´Ø¬Ø¹ Ø§Ø¨Ù†Ùƒ Ø¹Ù„Ù‰ Ø§Ù„ØªØ¹Ø¨ÙŠØ± Ø¹Ù† Ù…Ø´Ø§Ø¹Ø±Ù‡ Ø¨Ø¯ÙˆÙ† Ø®Ø¬Ù„',
      'ÙƒÙ† Ø§Ù„Ù…Ø±Ø´Ø¯: ÙˆØ¬Ù‘Ù‡ Ø¨Ø¯ÙˆÙ† Ù…Ø§ ØªØ³ÙŠØ·Ø±',
    ],
    'fhood': [
      'Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø© Ù„Ø·ÙÙ„Ùƒ Ø¹Ù† Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ù„ÙŠ ØµØ±Øª ÙÙŠÙ‡ Ø£Ø¨',
      'Ø´Ø§Ø±Ùƒ ÙÙŠ Ù…Ø¬ØªÙ…Ø¹ Ø§Ù„Ø¢Ø¨Ø§Ø¡ Ø§Ù„Ù…Ø­Ù„ÙŠ Ø£Ùˆ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ',
      'ØªØ¹Ù„Ù… Ù…Ù† Ù‚ØµØµ Ø¢Ø¨Ø§Ø¡ Ù…Ù† Ø®Ù„ÙÙŠØ§Øª Ù…Ø®ØªÙ„ÙØ© Ø¹Ù†Ùƒ',
      'ÙˆØ§Ø²Ù† Ø¨ÙŠÙ† Ø·Ù…ÙˆØ­Ø§ØªÙƒ Ø§Ù„Ù…Ù‡Ù†ÙŠØ© ÙˆÙˆÙ‚ØªÙƒ Ù…Ø¹ Ø¹Ø§Ø¦Ù„ØªÙƒ',
      'ØªØ·ÙˆÙ‘Ø¹ Ù…Ø¹ Ø·ÙÙ„Ùƒ ÙÙŠ Ø¹Ù…Ù„ Ø®ÙŠØ±ÙŠ ÙŠØ¹Ù„Ù‘Ù…Ù‡ Ø§Ù„Ø¹Ø·Ø§Ø¡',
      'ØªØ°ÙƒØ± Ø¥Ù† Ø§Ù„Ø£Ø¨ÙˆØ© Ù…Ø§Ø±Ø§Ø«ÙˆÙ† Ù…Ùˆ Ø³Ø¨Ø§Ù‚ Ø³Ø±Ø¹Ø©',
    ],
  };

  // ==================== STATE ====================

  let currentView = 'library';
  let currentBookPath = null;
  let readingTimerStart = null;
  let readingTimerInterval = null;
  let currentFilter = 'all';
  let currentCategoryFilter = 'all';
  let currentSearchQuery = '';
  let currentHighlightColor = 'yellow';
  let highlightModeActive = false;
  let currentZoom = 1.0;
  let currentFontSize = 18;
  let currentFontFamily = 'Tajawal';
  let currentTheme = 'dark';
  let currentScrollPercent = 0;

  // ==================== INITIALIZATION ====================

  async function init() {
    try {
      await DB.init();
      console.log('DB initialized');

      // Load persisted settings
      const savedTheme = await DB.getSetting('theme');
      const savedFontSize = await DB.getSetting('fontSize');
      const savedFontFamily = await DB.getSetting('fontFamily');
      const savedZoom = await DB.getSetting('zoom');

      if (savedTheme) currentTheme = savedTheme;
      if (savedFontSize) currentFontSize = savedFontSize;
      if (savedFontFamily) currentFontFamily = savedFontFamily;
      if (savedZoom) currentZoom = savedZoom;

      applyTheme(currentTheme);
      applyFontToBody();
      await renderLibrary();
      setupBottomNav();
      setupEventListeners();
      await updateStreakBadge();
      registerServiceWorker();

      // Check if we should restore a book from hash
      if (window.location.hash) {
        const hash = window.location.hash.substring(1);
        if (hash.startsWith('book:')) {
          const bookPath = decodeURIComponent(hash.substring(5));
          await openBook(bookPath);
        } else if (['dashboard', 'quotes', 'actions', 'settings'].includes(hash)) {
          switchView(hash);
        }
      }

      console.log('App initialized');
    } catch (err) {
      console.error('App init failed:', err);
    }
  }

  // ==================== SERVICE WORKER ====================

  function registerServiceWorker() {
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js').then(
        (reg) => console.log('SW registered:', reg.scope),
        (err) => console.warn('SW registration failed:', err)
      );
    }
  }

  // ==================== THEME ====================

  function applyTheme(theme) {
    currentTheme = theme;
    document.documentElement.setAttribute('data-theme', theme);
    document.body.setAttribute('data-theme', theme);
    DB.setSetting('theme', theme);

    // Update meta theme-color for browser chrome
    const themeColors = { dark: '#0f0f1a', light: '#f5f5f5', sepia: '#f4ecd8' };
    const metaTheme = document.querySelector('meta[name="theme-color"]');
    if (metaTheme) metaTheme.setAttribute('content', themeColors[theme] || '#0f0f1a');

    // Send to iframe if open
    const frame = document.getElementById('book-frame');
    if (frame && frame.contentWindow) {
      try {
        frame.contentWindow.postMessage({ type: 'SET_THEME', theme }, '*');
      } catch (e) { /* cross-origin */ }
    }
  }

  // ==================== VIEW NAVIGATION ====================

  function switchView(viewId) {
    const views = ['library', 'reader', 'dashboard', 'quotes', 'actions', 'settings'];
    views.forEach((v) => {
      const el = document.getElementById('view-' + v);
      if (el) el.classList.remove('active');
    });

    const target = document.getElementById('view-' + viewId);
    if (target) target.classList.add('active');

    currentView = viewId;

    // Update bottom nav active state
    const navItems = document.querySelectorAll('#bottom-nav [data-view]');
    navItems.forEach((item) => {
      item.classList.toggle('active', item.getAttribute('data-view') === viewId);
    });

    // Show/hide bottom nav and body class in reader
    const isReader = viewId === 'reader';
    document.body.classList.toggle('reading', isReader);
    const bottomNav = document.getElementById('bottom-nav');
    if (bottomNav) {
      bottomNav.style.display = isReader ? 'none' : '';
    }

    // Reset library header visibility when switching back to library
    if (viewId === 'library') {
      const header = document.querySelector('.library-header');
      const search = document.querySelector('.search-container');
      const filters = document.querySelector('.filter-tabs');
      if (header) header.classList.remove('header-hidden');
      if (search) search.classList.remove('header-hidden');
      if (filters) filters.classList.remove('header-hidden');
    }

    // Render view content on switch
    if (viewId === 'dashboard') renderDashboard();
    if (viewId === 'quotes') renderQuotes();
    if (viewId === 'actions') renderActions();
    if (viewId === 'settings') renderSettings();
    if (viewId === 'library') renderLibrary();

    // Update URL hash for non-reader views
    if (viewId !== 'reader' && viewId !== 'library') {
      history.pushState({ view: viewId }, '', '#' + viewId);
    } else if (viewId === 'library') {
      history.pushState({ view: 'library' }, '', window.location.pathname);
    }
  }

  // ==================== BOTTOM NAV ====================

  function setupBottomNav() {
    const nav = document.getElementById('bottom-nav');
    if (!nav) return;

    nav.innerHTML = `
      <button class="nav-item active" data-view="library">
        <span class="nav-icon">\uD83D\uDCDA</span>
        <span class="nav-label">\u0627\u0644\u0645\u0643\u062A\u0628\u0629</span>
      </button>
      <button class="nav-item" data-view="dashboard">
        <span class="nav-icon">\uD83D\uDCCA</span>
        <span class="nav-label">\u0625\u062D\u0635\u0627\u0626\u064A\u0627\u062A</span>
      </button>
      <button class="nav-item" data-view="quotes">
        <span class="nav-icon">\uD83D\uDCDD</span>
        <span class="nav-label">\u0627\u0642\u062A\u0628\u0627\u0633\u0627\u062A</span>
      </button>
      <button class="nav-item" data-view="actions">
        <span class="nav-icon">\u2705</span>
        <span class="nav-label">\u0625\u062C\u0631\u0627\u0621\u0627\u062A</span>
      </button>
      <button class="nav-item" data-view="settings">
        <span class="nav-icon">\u2699\uFE0F</span>
        <span class="nav-label">\u0625\u0639\u062F\u0627\u062F\u0627\u062A</span>
      </button>
    `;

    nav.addEventListener('click', (e) => {
      const item = e.target.closest('[data-view]');
      if (item) {
        switchView(item.getAttribute('data-view'));
      }
    });
  }

  // ==================== EVENT LISTENERS ====================

  function setupEventListeners() {
    // Search input
    const searchInput = document.getElementById('search-input');
    if (searchInput) {
      searchInput.addEventListener('input', (e) => {
        currentSearchQuery = e.target.value.trim();
        renderLibrary();
      });
    }

    // Filter tabs
    const filterTabs = document.getElementById('filter-tabs');
    if (filterTabs) {
      filterTabs.addEventListener('click', (e) => {
        const tab = e.target.closest('[data-filter]');
        if (tab) {
          currentFilter = tab.getAttribute('data-filter');
          filterTabs.querySelectorAll('[data-filter]').forEach((t) =>
            t.classList.toggle('active', t === tab)
          );
          renderLibrary();
        }
      });
    }

    // Reader close button
    const btnClose = document.getElementById('btn-close-reader');
    if (btnClose) {
      btnClose.addEventListener('click', () => closeBook());
    }

    // Reader bookmark button
    const btnBookmark = document.getElementById('btn-bookmark');
    if (btnBookmark) {
      btnBookmark.addEventListener('click', () => addBookmarkAtCurrentPosition());
    }

    // TOC button
    const btnToc = document.getElementById('btn-toc');
    if (btnToc) {
      btnToc.addEventListener('click', () => showTableOfContents());
    }

    // Reader font settings button
    const btnFont = document.getElementById('btn-font-settings');
    if (btnFont) {
      btnFont.addEventListener('click', () => toggleFontPanel());
    }

    // Library scroll direction detection (hide header on scroll down)
    setupLibraryScrollHide();

    // Listen for messages from iframe
    window.addEventListener('message', handleIframeMessage);

    // History back button
    window.addEventListener('popstate', (event) => {
      if (currentView === 'reader') {
        closeBook();
      } else if (event.state && event.state.view) {
        switchView(event.state.view);
      } else {
        switchView('library');
      }
    });
  }

  // ==================== LIBRARY SCROLL HIDE ====================

  function setupLibraryScrollHide() {
    let lastScrollTop = 0;
    let scrollDirection = '';
    const libraryView = document.getElementById('view-library');
    if (!libraryView) return;

    window.addEventListener('scroll', () => {
      // Only apply on library view
      if (currentView !== 'library') return;

      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
      const delta = scrollTop - lastScrollTop;

      if (Math.abs(delta) > 8) {
        const newDir = delta > 0 ? 'down' : 'up';
        if (newDir !== scrollDirection) {
          scrollDirection = newDir;
          const header = document.querySelector('.library-header');
          const search = document.querySelector('.search-container');
          const filters = document.querySelector('.filter-tabs');

          if (scrollDirection === 'down' && scrollTop > 100) {
            if (header) header.classList.add('header-hidden');
            if (search) search.classList.add('header-hidden');
            if (filters) filters.classList.add('header-hidden');
          } else {
            if (header) header.classList.remove('header-hidden');
            if (search) search.classList.remove('header-hidden');
            if (filters) filters.classList.remove('header-hidden');
          }
        }
        lastScrollTop = scrollTop;
      }
    }, { passive: true });
  }

  // ==================== FONT APPLICATION ====================

  function applyFontToBody() {
    // Remove all font classes
    document.body.classList.remove('font-tajawal', 'font-noto', 'font-amiri');

    // Add the correct one
    if (currentFontFamily === 'Tajawal') document.body.classList.add('font-tajawal');
    else if (currentFontFamily === 'Noto Naskh Arabic') document.body.classList.add('font-noto');
    else if (currentFontFamily === 'Amiri') document.body.classList.add('font-amiri');
  }

  // ==================== STREAK BADGE ====================

  async function updateStreakBadge() {
    const badge = document.getElementById('streak-badge');
    if (!badge) return;

    const streak = await DB.getStreak();
    if (streak > 0) {
      badge.textContent = streak + ' \uD83D\uDD25';
      badge.style.display = '';
    } else {
      badge.style.display = 'none';
    }
  }

  // ==================== LIBRARY VIEW ====================

  async function renderLibrary() {
    const grid = document.getElementById('books-grid');
    if (!grid) return;

    // Get all reading progress
    const allProgress = await DB.getAllProgress();
    const progressMap = {};
    allProgress.forEach((p) => { progressMap[p.bookPath] = p; });

    // Filter books
    let filtered = [...BOOKS];

    // Text search
    if (currentSearchQuery) {
      const q = currentSearchQuery.toLowerCase();
      filtered = filtered.filter((b) =>
        b.title.toLowerCase().includes(q) ||
        b.subtitle.toLowerCase().includes(q) ||
        b.author.toLowerCase().includes(q) ||
        b.authorEn.toLowerCase().includes(q)
      );
    }

    // Status filter
    if (currentFilter === 'unread') {
      filtered = filtered.filter((b) => !progressMap[b.path]);
    } else if (currentFilter === 'reading') {
      filtered = filtered.filter((b) => {
        const p = progressMap[b.path];
        return p && !p.isCompleted && p.scrollPercent > 0;
      });
    } else if (currentFilter === 'completed') {
      filtered = filtered.filter((b) => {
        const p = progressMap[b.path];
        return p && p.isCompleted;
      });
    }

    // Category filter
    if (currentCategoryFilter !== 'all') {
      filtered = filtered.filter((b) => b.category === currentCategoryFilter);
    }

    // Group by category
    const grouped = {};
    filtered.forEach((book) => {
      if (!grouped[book.category]) grouped[book.category] = [];
      grouped[book.category].push(book);
    });

    let html = '';
    let cardIndex = 0;

    // Render filter tabs if not already rendered
    const filterTabsEl = document.getElementById('filter-tabs');
    if (filterTabsEl && !filterTabsEl.hasChildNodes()) {
      filterTabsEl.innerHTML = `
        <button class="filter-tab active" data-filter="all">\u0627\u0644\u0643\u0644</button>
        <button class="filter-tab" data-filter="unread">\u0644\u0645 \u064A\u064F\u0642\u0631\u0623</button>
        <button class="filter-tab" data-filter="reading">\u0642\u064A\u062F \u0627\u0644\u0642\u0631\u0627\u0621\u0629</button>
        <button class="filter-tab" data-filter="completed">\u0645\u0643\u062A\u0645\u0644</button>
      `;
    }

    // Render category filter buttons
    html += '<div class="category-filters">';
    html += `<button class="cat-filter-btn ${currentCategoryFilter === 'all' ? 'active' : ''}" data-cat="all">\u0627\u0644\u0643\u0644</button>`;
    CATEGORIES.forEach((cat) => {
      html += `<button class="cat-filter-btn ${currentCategoryFilter === cat.id ? 'active' : ''}" data-cat="${cat.id}">${cat.icon} ${cat.ar}</button>`;
    });
    html += '</div>';

    // Render grouped books
    const categoryOrder = ['productivity', 'finance', 'biography', 'pregnancy', 'fatherhood'];
    categoryOrder.forEach((catId) => {
      const books = grouped[catId];
      if (!books || books.length === 0) return;

      const cat = CATEGORIES.find((c) => c.id === catId);
      html += `<section class="category-section">`;
      html += `<h2 class="category-heading"><span>${cat.icon}</span> ${cat.ar}</h2>`;
      html += `<div class="category-grid">`;

      books.forEach((book) => {
        const progress = progressMap[book.path];
        let statusBadge = '';
        let progressBar = '';

        if (progress && progress.isCompleted) {
          statusBadge = `<span class="status-badge completed">\u0645\u0643\u062A\u0645\u0644</span>`;
        } else if (progress && progress.scrollPercent > 0) {
          const pct = Math.round(progress.scrollPercent);
          statusBadge = `<span class="status-badge reading">\u064A\u064F\u0642\u0631\u0623 ${pct}%</span>`;
          progressBar = `<div class="card-progress"><div class="card-progress-fill" style="width:${pct}%"></div></div>`;
        }

        html += `
          <div class="book-card" data-color="${book.color}" style="--i:${cardIndex}" onclick="App.openBook('${book.path}')">
            <div class="book-cover">${book.emoji}</div>
            <div class="book-info">
              ${statusBadge}
              <h3 class="book-title">${book.title}</h3>
              <p class="book-subtitle">${book.subtitle}</p>
              <p class="book-author">${book.author}</p>
              <span class="book-tag">${book.chapters} \u0641\u0635\u0644</span>
              ${progressBar}
            </div>
          </div>
        `;
        cardIndex++;
      });

      html += `</div></section>`;
    });

    if (filtered.length === 0) {
      html += `<div class="empty-state"><p>\u0644\u0627 \u062A\u0648\u062C\u062F \u0643\u062A\u0628 \u0645\u0637\u0627\u0628\u0642\u0629</p></div>`;
    }

    grid.innerHTML = html;

    // Attach category filter listeners
    grid.querySelectorAll('.cat-filter-btn').forEach((btn) => {
      btn.addEventListener('click', (e) => {
        currentCategoryFilter = e.target.getAttribute('data-cat');
        renderLibrary();
      });
    });
  }

  // ==================== BOOK READER ====================

  async function openBook(bookPath) {
    currentBookPath = bookPath;
    switchView('reader');

    // Reset immersive state â€” show header when opening a book
    const rh = document.querySelector('.reader-header');
    const rp = document.querySelector('.reader-progress-container');
    const bf = document.getElementById('book-frame');
    if (rh) rh.classList.remove('reader-hidden');
    if (rp) rp.classList.remove('reader-hidden');
    if (bf) bf.classList.remove('immersive');

    const frame = document.getElementById('book-frame');
    if (frame) {
      frame.src = bookPath;
    }

    // Update reader title
    const book = BOOKS.find((b) => b.path === bookPath);
    const readerTitle = document.getElementById('reader-title');
    if (readerTitle && book) {
      readerTitle.textContent = book.title;
    }

    // Save currently reading book
    await DB.setSetting('currentBook', bookPath);

    // Log book opened in daily stats
    await DB.logBookOpened(bookPath);

    // Start reading timer
    startReadingTimer();

    // Update streak
    await updateStreakBadge();

    // History
    history.pushState({ book: bookPath }, '', '#book:' + encodeURIComponent(bookPath));

    // Wait for iframe load to send settings
    if (frame) {
      frame.onload = async () => {
        await sendSettingsToIframe();
        await sendSavedDataToIframe(bookPath);
      };
    }
  }

  async function closeBook() {
    // Save final position
    if (currentBookPath && currentScrollPercent > 0) {
      await DB.saveProgress(currentBookPath, {
        scrollPercent: currentScrollPercent,
        lastReadAt: Date.now(),
      });
    }

    // Stop reading timer and log time
    stopReadingTimer();

    // Clear iframe
    const frame = document.getElementById('book-frame');
    if (frame) {
      frame.src = '';
      frame.onload = null;
    }

    currentBookPath = null;
    currentScrollPercent = 0;
    highlightModeActive = false;

    await DB.setSetting('currentBook', null);
    switchView('library');
  }

  async function sendSettingsToIframe() {
    const frame = document.getElementById('book-frame');
    if (!frame || !frame.contentWindow) return;

    try {
      frame.contentWindow.postMessage({
        type: 'SET_THEME',
        theme: currentTheme,
      }, '*');

      frame.contentWindow.postMessage({
        type: 'SET_FONT_SIZE',
        size: currentFontSize,
      }, '*');

      frame.contentWindow.postMessage({
        type: 'SET_FONT_FAMILY',
        family: currentFontFamily,
      }, '*');

      frame.contentWindow.postMessage({
        type: 'SET_ZOOM',
        zoom: currentZoom,
      }, '*');
    } catch (e) {
      console.warn('Failed to send settings to iframe:', e);
    }
  }

  async function sendSavedDataToIframe(bookPath) {
    const frame = document.getElementById('book-frame');
    if (!frame || !frame.contentWindow) return;

    try {
      // Send all saved data via INIT message (single message, handles everything)
      const progress = await DB.getProgress(bookPath);
      const highlights = await DB.getHighlights(bookPath);
      const comments = await DB.getComments(bookPath);

      frame.contentWindow.postMessage({
        type: 'INIT',
        theme: currentTheme,
        fontSize: currentFontSize,
        fontFamily: currentFontFamily,
        zoom: currentZoom,
        scrollPercent: progress ? progress.scrollPercent : 0,
        highlights: highlights || [],
        comments: comments || [],
      }, '*');
    } catch (e) {
      console.warn('Failed to send saved data to iframe:', e);
    }
  }

  // ==================== IFRAME MESSAGE HANDLER ====================

  async function handleIframeMessage(event) {
    const data = event.data;
    if (!data || !data.type) return;

    switch (data.type) {
      case 'SCROLL_UPDATE':
        if (currentBookPath) {
          currentScrollPercent = data.scrollPercent || 0;
          await DB.saveProgress(currentBookPath, {
            scrollPercent: data.scrollPercent,
            scrollTop: data.scrollTop,
            lastReadAt: Date.now(),
          });
          // Update progress display
          const progressEl = document.getElementById('reader-progress');
          if (progressEl) {
            progressEl.textContent = Math.round(data.scrollPercent) + '%';
            progressEl.style.setProperty('--progress', data.scrollPercent + '%');
          }
        }
        break;

      case 'HIGHLIGHT_CREATED':
        if (currentBookPath) {
          const book = BOOKS.find((b) => b.path === currentBookPath);
          await DB.addHighlight({
            bookPath: currentBookPath,
            bookTitle: book ? book.title : '',
            text: data.text,
            color: data.color || currentHighlightColor,
            elementSelector: data.elementSelector || '',
          });
        }
        break;

      case 'COMMENT_CREATED':
        if (currentBookPath) {
          const book2 = BOOKS.find((b) => b.path === currentBookPath);
          await DB.addComment({
            bookPath: currentBookPath,
            bookTitle: book2 ? book2.title : '',
            text: data.text,
            elementSelector: data.elementSelector || '',
          });
        }
        break;

      case 'READING_COMPLETE':
        if (currentBookPath) {
          await DB.markCompleted(currentBookPath);
          showCelebration();
        }
        break;

      case 'HIGHLIGHT_REMOVED':
        if (currentBookPath && data.text) {
          // Find and delete the highlight from DB by matching text + bookPath
          const allHighlights = await DB.getHighlights(currentBookPath);
          const match = allHighlights.find((h) => h.text === data.text);
          if (match) {
            await DB.deleteHighlight(match.id);
          }
          showToast('\u062A\u0645 \u0625\u0632\u0627\u0644\u0629 \u0627\u0644\u062A\u0638\u0644\u064A\u0644');
        }
        break;

      case 'SCROLL_DIRECTION':
        {
          const rh = document.querySelector('.reader-header');
          const rp = document.querySelector('.reader-progress-container');
          const bf = document.getElementById('book-frame');
          if (data.direction === 'down') {
            if (rh) rh.classList.add('reader-hidden');
            if (rp) rp.classList.add('reader-hidden');
            if (bf) bf.classList.add('immersive');
          } else {
            if (rh) rh.classList.remove('reader-hidden');
            if (rp) rp.classList.remove('reader-hidden');
            if (bf) bf.classList.remove('immersive');
          }
        }
        break;

      case 'CONTENT_LOADED':
        if (data.title) {
          const readerTitle = document.getElementById('reader-title');
          if (readerTitle) readerTitle.textContent = data.title;
        }
        break;
    }
  }

  // ==================== READER CONTROLS ====================

  async function addBookmarkAtCurrentPosition() {
    if (!currentBookPath) return;

    const book = BOOKS.find((b) => b.path === currentBookPath);
    await DB.addBookmark({
      bookPath: currentBookPath,
      bookTitle: book ? book.title : '',
      scrollPercent: currentScrollPercent,
      note: '',
    });

    // Visual feedback
    const btn = document.getElementById('btn-bookmark');
    if (btn) {
      btn.classList.add('bookmarked');
      setTimeout(() => btn.classList.remove('bookmarked'), 1500);
    }

    showToast('\u062A\u0645 \u062D\u0641\u0638 \u0627\u0644\u0639\u0644\u0627\u0645\u0629');
  }

  function toggleHighlightMode() {
    highlightModeActive = !highlightModeActive;

    const btn = document.getElementById('btn-highlight-mode');
    if (btn) {
      btn.classList.toggle('active', highlightModeActive);
    }

    const frame = document.getElementById('book-frame');
    if (frame && frame.contentWindow) {
      try {
        frame.contentWindow.postMessage({
          type: 'TOGGLE_HIGHLIGHT_MODE',
          active: highlightModeActive,
          color: currentHighlightColor,
        }, '*');
      } catch (e) { /* cross-origin */ }
    }
  }

  function toggleFontPanel() {
    let panel = document.getElementById('font-settings-panel');

    if (panel) {
      // Toggle visibility
      const isVisible = panel.classList.contains('visible');
      panel.classList.toggle('visible', !isVisible);
      return;
    }

    // Create panel
    panel = document.createElement('div');
    panel.id = 'font-settings-panel';
    panel.className = 'font-panel visible';
    panel.innerHTML = `
      <div class="font-panel-header">
        <span>\u0625\u0639\u062F\u0627\u062F\u0627\u062A \u0627\u0644\u062E\u0637</span>
        <button class="font-panel-close" onclick="document.getElementById('font-settings-panel').classList.remove('visible')">\u2715</button>
      </div>
      <div class="font-panel-section">
        <label>\u062D\u062C\u0645 \u0627\u0644\u062E\u0637: <span id="font-size-value">${currentFontSize}px</span></label>
        <input type="range" id="font-size-slider" min="14" max="24" value="${currentFontSize}" step="1">
      </div>
      <div class="font-panel-section">
        <label>\u0646\u0648\u0639 \u0627\u0644\u062E\u0637</label>
        <div class="font-family-buttons">
          <button class="font-btn ${currentFontFamily === 'Tajawal' ? 'active' : ''}" data-font="Tajawal" style="font-family:Tajawal">Tajawal</button>
          <button class="font-btn ${currentFontFamily === 'Amiri' ? 'active' : ''}" data-font="Amiri" style="font-family:Amiri">\u0623\u0645\u064A\u0631\u064A</button>
          <button class="font-btn ${currentFontFamily === 'Noto Naskh Arabic' ? 'active' : ''}" data-font="Noto Naskh Arabic" style="font-family:'Noto Naskh Arabic'">\u0646\u0648\u062A\u0648 \u0646\u0633\u062E</button>
        </div>
      </div>
      <div class="font-panel-section">
        <label>\u062A\u0643\u0628\u064A\u0631 / \u062A\u0635\u063A\u064A\u0631</label>
        <div class="zoom-controls">
          <button class="zoom-btn" id="zoom-out">-</button>
          <span id="zoom-value">${Math.round(currentZoom * 100)}%</span>
          <button class="zoom-btn" id="zoom-in">+</button>
        </div>
      </div>
    `;

    document.getElementById('view-reader').appendChild(panel);

    // Font size slider
    const slider = panel.querySelector('#font-size-slider');
    slider.addEventListener('input', (e) => {
      currentFontSize = parseInt(e.target.value);
      panel.querySelector('#font-size-value').textContent = currentFontSize + 'px';
      DB.setSetting('fontSize', currentFontSize);
      sendFontToIframe();
    });

    // Font family buttons
    panel.querySelectorAll('.font-btn').forEach((btn) => {
      btn.addEventListener('click', (e) => {
        currentFontFamily = e.target.getAttribute('data-font');
        panel.querySelectorAll('.font-btn').forEach((b) => b.classList.remove('active'));
        e.target.classList.add('active');
        DB.setSetting('fontFamily', currentFontFamily);
        applyFontToBody();
        sendFontToIframe();
      });
    });

    // Zoom controls
    panel.querySelector('#zoom-out').addEventListener('click', () => {
      currentZoom = Math.max(0.8, currentZoom - 0.1);
      updateZoom();
    });
    panel.querySelector('#zoom-in').addEventListener('click', () => {
      currentZoom = Math.min(1.5, currentZoom + 0.1);
      updateZoom();
    });
  }

  function sendFontToIframe() {
    const frame = document.getElementById('book-frame');
    if (frame && frame.contentWindow) {
      try {
        frame.contentWindow.postMessage({
          type: 'SET_FONT_SIZE',
          size: currentFontSize,
        }, '*');
        frame.contentWindow.postMessage({
          type: 'SET_FONT_FAMILY',
          family: currentFontFamily,
        }, '*');
      } catch (e) { /* cross-origin */ }
    }
  }

  function updateZoom() {
    const zoomValue = document.getElementById('zoom-value');
    if (zoomValue) zoomValue.textContent = Math.round(currentZoom * 100) + '%';

    DB.setSetting('zoom', currentZoom);

    const frame = document.getElementById('book-frame');
    if (frame && frame.contentWindow) {
      try {
        frame.contentWindow.postMessage({
          type: 'SET_ZOOM',
          zoom: currentZoom,
        }, '*');
      } catch (e) { /* cross-origin */ }
    }
  }

  // ==================== TABLE OF CONTENTS ====================

  function showTableOfContents() {
    const frame = document.getElementById('book-frame');
    if (!frame) return;

    // Remove existing TOC panel
    const existing = document.getElementById('toc-panel');
    if (existing) {
      existing.remove();
      return;
    }

    let headings = [];
    try {
      const doc = frame.contentDocument || frame.contentWindow.document;
      const els = doc.querySelectorAll('h1, h2, h3');
      els.forEach((el, idx) => {
        const text = el.textContent.trim();
        if (text && text.length > 1) {
          headings.push({
            text,
            tag: el.tagName.toLowerCase(),
            index: idx,
          });
        }
      });
    } catch (e) {
      console.warn('Cannot access iframe headings:', e);
      return;
    }

    if (headings.length === 0) {
      showToast('\u0644\u0627 \u064A\u0648\u062C\u062F \u0641\u0647\u0631\u0633');
      return;
    }

    // Build TOC panel
    const panel = document.createElement('div');
    panel.id = 'toc-panel';
    panel.className = 'toc-panel';
    panel.innerHTML = `
      <div class="toc-backdrop"></div>
      <div class="toc-content">
        <div class="toc-header">
          <h3>\u0627\u0644\u0641\u0647\u0631\u0633</h3>
          <button class="toc-close">\u2715</button>
        </div>
        <div class="toc-list">
          ${headings.map((h, i) => `
            <button class="toc-item toc-${h.tag}" data-heading-index="${h.index}">
              ${h.text}
            </button>
          `).join('')}
        </div>
      </div>
    `;

    document.getElementById('view-reader').appendChild(panel);

    // Animate in
    requestAnimationFrame(() => panel.classList.add('visible'));

    // Close handlers
    panel.querySelector('.toc-backdrop').addEventListener('click', () => {
      panel.classList.remove('visible');
      setTimeout(() => panel.remove(), 300);
    });
    panel.querySelector('.toc-close').addEventListener('click', () => {
      panel.classList.remove('visible');
      setTimeout(() => panel.remove(), 300);
    });

    // Heading click handlers
    panel.querySelectorAll('.toc-item').forEach((item) => {
      item.addEventListener('click', () => {
        const idx = parseInt(item.getAttribute('data-heading-index'));
        try {
          const doc = frame.contentDocument || frame.contentWindow.document;
          const allHeadings = doc.querySelectorAll('h1, h2, h3');
          if (allHeadings[idx]) {
            allHeadings[idx].scrollIntoView({ behavior: 'smooth', block: 'start' });
          }
        } catch (e) { /* ignore */ }
        panel.classList.remove('visible');
        setTimeout(() => panel.remove(), 300);
      });
    });
  }

  // ==================== READING TIMER ====================

  function startReadingTimer() {
    readingTimerStart = Date.now();
    // Also update reading time in the book's progress every minute
    readingTimerInterval = setInterval(async () => {
      if (currentBookPath && readingTimerStart) {
        const elapsedMs = Date.now() - readingTimerStart;
        await DB.saveProgress(currentBookPath, {
          totalReadTimeMs: elapsedMs,
        });
      }
    }, 60000); // every minute
  }

  function stopReadingTimer() {
    if (readingTimerStart) {
      const elapsedMs = Date.now() - readingTimerStart;
      const minutes = Math.max(1, Math.round(elapsedMs / 60000));
      DB.logReadingTime(minutes);
      readingTimerStart = null;
    }
    if (readingTimerInterval) {
      clearInterval(readingTimerInterval);
      readingTimerInterval = null;
    }
  }

  // ==================== CELEBRATION ====================

  function showCelebration() {
    const overlay = document.createElement('div');
    overlay.className = 'celebration-overlay';
    overlay.innerHTML = `
      <div class="celebration-content">
        <div class="celebration-emoji">\uD83C\uDF89</div>
        <h2>\u0645\u0628\u0631\u0648\u0643!</h2>
        <p>\u0623\u0643\u0645\u0644\u062A \u0642\u0631\u0627\u0621\u0629 \u0627\u0644\u0643\u062A\u0627\u0628</p>
        <button class="celebration-btn" onclick="this.closest('.celebration-overlay').remove()">\u0645\u0645\u062A\u0627\u0632!</button>
      </div>
    `;
    document.body.appendChild(overlay);
    setTimeout(() => overlay.classList.add('visible'), 10);
  }

  // ==================== TOAST ====================

  function showToast(message) {
    let toast = document.getElementById('app-toast');
    if (!toast) {
      toast = document.createElement('div');
      toast.id = 'app-toast';
      toast.className = 'app-toast';
      document.body.appendChild(toast);
    }
    toast.textContent = message;
    toast.classList.add('visible');
    setTimeout(() => toast.classList.remove('visible'), 2000);
  }

  // ==================== DASHBOARD VIEW ====================

  async function renderDashboard() {
    const dashSection = document.getElementById('view-dashboard');
    if (!dashSection) return;

    const allProgress = await DB.getAllProgress();
    const completed = allProgress.filter((p) => p.isCompleted);
    const inProgress = allProgress.filter((p) => !p.isCompleted && p.scrollPercent > 0);
    const streak = await DB.getStreak();

    // Calculate best streak
    let bestStreak = streak;
    let tempStreak = 0;
    const today = new Date();
    for (let i = 0; i < 365; i++) {
      const checkDate = new Date(today);
      checkDate.setDate(today.getDate() - i);
      const dateKey = formatDateKey(checkDate);
      const stats = await DB.getDailyStats(dateKey);
      if (stats && (stats.booksOpened.length > 0 || stats.minutesRead > 0)) {
        tempStreak++;
        if (tempStreak > bestStreak) bestStreak = tempStreak;
      } else {
        tempStreak = 0;
      }
    }

    // Total reading time
    let totalMinutes = 0;
    const thirtyDaysAgo = new Date();
    thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);
    const startKey = formatDateKey(thirtyDaysAgo);
    const endKey = formatDateKey(today);
    const statsRange = await DB.getStatsRange(startKey, endKey);
    statsRange.forEach((s) => { totalMinutes += s.minutesRead || 0; });

    const totalHours = Math.floor(totalMinutes / 60);
    const remainingMins = totalMinutes % 60;
    const avgPerDay = statsRange.length > 0 ? Math.round(totalMinutes / 30) : 0;

    // Calendar dots for last 30 days
    let calendarHtml = '<div class="calendar-dots">';
    for (let i = 29; i >= 0; i--) {
      const d = new Date(today);
      d.setDate(today.getDate() - i);
      const dKey = formatDateKey(d);
      const dayStat = statsRange.find((s) => s.date === dKey);
      const active = dayStat && (dayStat.booksOpened.length > 0 || dayStat.minutesRead > 0);
      const dayLabel = d.getDate();
      calendarHtml += `<div class="calendar-dot ${active ? 'active' : ''}" title="${dKey}"><span>${dayLabel}</span></div>`;
    }
    calendarHtml += '</div>';

    // Category breakdown
    const catCounts = {};
    CATEGORIES.forEach((c) => { catCounts[c.id] = { total: 0, read: 0 }; });
    BOOKS.forEach((b) => {
      catCounts[b.category].total++;
      const p = allProgress.find((pr) => pr.bookPath === b.path);
      if (p && p.isCompleted) catCounts[b.category].read++;
    });

    let catBarsHtml = '';
    CATEGORIES.forEach((cat) => {
      const c = catCounts[cat.id];
      const pct = c.total > 0 ? Math.round((c.read / c.total) * 100) : 0;
      catBarsHtml += `
        <div class="cat-bar-row">
          <span class="cat-bar-label">${cat.icon} ${cat.ar}</span>
          <div class="cat-bar-track">
            <div class="cat-bar-fill" style="width:${pct}%"></div>
          </div>
          <span class="cat-bar-count">${c.read}/${c.total}</span>
        </div>
      `;
    });

    // Recent activity
    const recentBooks = allProgress
      .filter((p) => p.lastReadAt)
      .sort((a, b) => b.lastReadAt - a.lastReadAt)
      .slice(0, 5);

    let recentHtml = '';
    recentBooks.forEach((p) => {
      const book = BOOKS.find((b) => b.path === p.bookPath);
      if (!book) return;
      const date = new Date(p.lastReadAt);
      const dateStr = date.toLocaleDateString('ar-SA', { month: 'short', day: 'numeric' });
      recentHtml += `
        <div class="recent-item" onclick="App.openBook('${book.path}')">
          <span class="recent-emoji">${book.emoji}</span>
          <div class="recent-info">
            <span class="recent-title">${book.title}</span>
            <span class="recent-date">${dateStr}</span>
          </div>
          <span class="recent-pct">${Math.round(p.scrollPercent)}%</span>
        </div>
      `;
    });

    // Mind Map: group by author
    const authorGroups = {};
    BOOKS.forEach((b) => {
      if (!authorGroups[b.author]) {
        authorGroups[b.author] = { authorEn: b.authorEn, books: [] };
      }
      authorGroups[b.author].books.push(b);
    });

    // Only show authors with 2+ books for the mind map
    const multiAuthors = Object.entries(authorGroups).filter(([, g]) => g.books.length >= 2);
    let mindMapHtml = '';
    if (multiAuthors.length > 0) {
      mindMapHtml += '<div class="mind-map">';
      multiAuthors.forEach(([authorAr, group]) => {
        const authorColor = group.books[0].color;
        mindMapHtml += `
          <div class="mind-map-cluster">
            <div class="mind-map-center" style="--cluster-color: var(--color-${authorColor}, #e94560)">
              <span class="mind-map-author">${authorAr}</span>
              <span class="mind-map-author-en">${group.authorEn}</span>
              <span class="mind-map-count">${group.books.length} \u0643\u062A\u0628</span>
            </div>
            <div class="mind-map-books">
        `;
        group.books.forEach((book, idx) => {
          const angle = (360 / group.books.length) * idx;
          mindMapHtml += `
            <div class="mind-map-book" style="--angle:${angle}deg; --book-color: var(--color-${book.color}, #e94560)" onclick="App.openBook('${book.path}')">
              <div class="mind-map-line"></div>
              <span class="mind-map-book-emoji">${book.emoji}</span>
              <span class="mind-map-book-title">${book.title}</span>
            </div>
          `;
        });
        mindMapHtml += `</div></div>`;
      });
      mindMapHtml += '</div>';
    }

    dashSection.innerHTML = `
      <div class="dashboard-content">
        <h2 class="dash-title">\uD83D\uDCCA \u0627\u0644\u0625\u062D\u0635\u0627\u0626\u064A\u0627\u062A</h2>

        <div class="streak-section" id="streak-section">
          <div class="streak-main">
            <span class="streak-number">${streak}</span>
            <span class="streak-fire">\uD83D\uDD25</span>
          </div>
          <p class="streak-label">\u0633\u0644\u0633\u0644\u0629 \u0627\u0644\u0642\u0631\u0627\u0621\u0629</p>
          <p class="streak-best">\u0623\u0641\u0636\u0644 \u0633\u0644\u0633\u0644\u0629: ${bestStreak} \u064A\u0648\u0645</p>
          ${calendarHtml}
        </div>

        <div class="stats-grid" id="stats-section">
          <div class="stat-card">
            <span class="stat-value">${completed.length}</span>
            <span class="stat-label">\u0643\u062A\u0628 \u0645\u0643\u062A\u0645\u0644\u0629</span>
          </div>
          <div class="stat-card">
            <span class="stat-value">${inProgress.length}</span>
            <span class="stat-label">\u0642\u064A\u062F \u0627\u0644\u0642\u0631\u0627\u0621\u0629</span>
          </div>
          <div class="stat-card">
            <span class="stat-value">${totalHours > 0 ? totalHours + '\u0633' : ''} ${remainingMins}\u062F</span>
            <span class="stat-label">\u0648\u0642\u062A \u0627\u0644\u0642\u0631\u0627\u0621\u0629</span>
          </div>
          <div class="stat-card">
            <span class="stat-value">${avgPerDay} \u062F</span>
            <span class="stat-label">\u0645\u0639\u062F\u0644 \u064A\u0648\u0645\u064A</span>
          </div>
        </div>

        <div class="dash-section" id="category-chart">
          <h3 class="dash-section-title">\u0627\u0644\u062A\u0635\u0646\u064A\u0641\u0627\u062A</h3>
          ${catBarsHtml}
        </div>

        ${recentBooks.length > 0 ? `
        <div class="dash-section">
          <h3 class="dash-section-title">\u0627\u0644\u0646\u0634\u0627\u0637 \u0627\u0644\u0623\u062E\u064A\u0631</h3>
          <div class="recent-list">${recentHtml}</div>
        </div>
        ` : ''}

        ${mindMapHtml ? `
        <div class="dash-section" id="mind-map-section">
          <h3 class="dash-section-title">\u062E\u0631\u064A\u0637\u0629 \u0627\u0644\u0645\u0624\u0644\u0641\u064A\u0646</h3>
          ${mindMapHtml}
        </div>
        ` : ''}
      </div>
    `;
  }

  // ==================== QUOTES VIEW ====================

  async function renderQuotes() {
    const quotesContent = document.getElementById('quotes-content') || document.getElementById('view-quotes');
    if (!quotesContent) return;

    // Get all data
    const highlights = await DB.getHighlights();
    const comments = await DB.getComments();
    const bookmarks = await DB.getBookmarks();

    // Determine which sub-tab is active (default: highlights)
    let activeTab = quotesContent.getAttribute('data-active-tab') || 'highlights';

    let tabsHtml = `
      <div class="quotes-tabs" id="quotes-tabs">
        <button class="quotes-tab ${activeTab === 'highlights' ? 'active' : ''}" data-qtab="highlights">\u0627\u0642\u062A\u0628\u0627\u0633\u0627\u062A</button>
        <button class="quotes-tab ${activeTab === 'comments' ? 'active' : ''}" data-qtab="comments">\u062A\u0639\u0644\u064A\u0642\u0627\u062A</button>
        <button class="quotes-tab ${activeTab === 'bookmarks' ? 'active' : ''}" data-qtab="bookmarks">\u0639\u0644\u0627\u0645\u0627\u062A</button>
      </div>
    `;

    let contentHtml = '';

    if (activeTab === 'highlights') {
      contentHtml = renderHighlightsList(highlights);
    } else if (activeTab === 'comments') {
      contentHtml = renderCommentsList(comments);
    } else if (activeTab === 'bookmarks') {
      contentHtml = renderBookmarksList(bookmarks);
    }

    // Determine the target element
    const targetEl = document.getElementById('view-quotes');
    if (targetEl) {
      targetEl.innerHTML = `
        <div class="quotes-view-content">
          <h2 class="quotes-title">\uD83D\uDCDD \u0645\u0644\u0627\u062D\u0638\u0627\u062A\u064A</h2>
          ${tabsHtml}
          <div class="quotes-list" id="quotes-list">${contentHtml}</div>
        </div>
      `;
      targetEl.setAttribute('data-active-tab', activeTab);

      // Tab click handlers
      targetEl.querySelectorAll('.quotes-tab').forEach((tab) => {
        tab.addEventListener('click', (e) => {
          targetEl.setAttribute('data-active-tab', e.target.getAttribute('data-qtab'));
          renderQuotes();
        });
      });

      // Delete handlers
      targetEl.querySelectorAll('[data-delete-highlight]').forEach((btn) => {
        btn.addEventListener('click', async (e) => {
          e.stopPropagation();
          const id = parseInt(btn.getAttribute('data-delete-highlight'));
          await DB.deleteHighlight(id);
          renderQuotes();
        });
      });

      targetEl.querySelectorAll('[data-delete-comment]').forEach((btn) => {
        btn.addEventListener('click', async (e) => {
          e.stopPropagation();
          const id = parseInt(btn.getAttribute('data-delete-comment'));
          await DB.deleteComment(id);
          renderQuotes();
        });
      });

      targetEl.querySelectorAll('[data-delete-bookmark]').forEach((btn) => {
        btn.addEventListener('click', async (e) => {
          e.stopPropagation();
          const id = parseInt(btn.getAttribute('data-delete-bookmark'));
          await DB.deleteBookmark(id);
          renderQuotes();
        });
      });

      // Share handlers
      targetEl.querySelectorAll('[data-share-text]').forEach((btn) => {
        btn.addEventListener('click', async (e) => {
          e.stopPropagation();
          const text = btn.getAttribute('data-share-text');
          await shareText(text);
        });
      });
    }
  }

  function renderHighlightsList(highlights) {
    if (highlights.length === 0) {
      return `<div class="empty-state"><p>\u0644\u0627 \u062A\u0648\u062C\u062F \u0627\u0642\u062A\u0628\u0627\u0633\u0627\u062A \u0628\u0639\u062F</p></div>`;
    }

    // Group by book
    const grouped = {};
    highlights.forEach((h) => {
      if (!grouped[h.bookPath]) grouped[h.bookPath] = [];
      grouped[h.bookPath].push(h);
    });

    let html = '';
    Object.entries(grouped).forEach(([bookPath, items]) => {
      const book = BOOKS.find((b) => b.path === bookPath);
      const bookTitle = book ? book.title : items[0].bookTitle || bookPath;
      html += `<div class="quotes-group"><h4 class="quotes-group-title">${bookTitle}</h4>`;
      items.sort((a, b) => b.createdAt - a.createdAt).forEach((h) => {
        const date = new Date(h.createdAt).toLocaleDateString('ar-SA', { month: 'short', day: 'numeric' });
        html += `
          <div class="quote-item highlight-${h.color || 'yellow'}">
            <p class="quote-text">${escapeHtml(h.text)}</p>
            <div class="quote-meta">
              <span class="quote-date">${date}</span>
              <div class="quote-actions">
                <button class="quote-action-btn" data-share-text="${escapeAttr(h.text)}">\u0645\u0634\u0627\u0631\u0643\u0629</button>
                <button class="quote-action-btn delete" data-delete-highlight="${h.id}">\u062D\u0630\u0641</button>
              </div>
            </div>
          </div>
        `;
      });
      html += '</div>';
    });
    return html;
  }

  function renderCommentsList(comments) {
    if (comments.length === 0) {
      return `<div class="empty-state"><p>\u0644\u0627 \u062A\u0648\u062C\u062F \u062A\u0639\u0644\u064A\u0642\u0627\u062A \u0628\u0639\u062F</p></div>`;
    }

    const grouped = {};
    comments.forEach((c) => {
      if (!grouped[c.bookPath]) grouped[c.bookPath] = [];
      grouped[c.bookPath].push(c);
    });

    let html = '';
    Object.entries(grouped).forEach(([bookPath, items]) => {
      const book = BOOKS.find((b) => b.path === bookPath);
      const bookTitle = book ? book.title : items[0].bookTitle || bookPath;
      html += `<div class="quotes-group"><h4 class="quotes-group-title">${bookTitle}</h4>`;
      items.sort((a, b) => b.createdAt - a.createdAt).forEach((c) => {
        const date = new Date(c.createdAt).toLocaleDateString('ar-SA', { month: 'short', day: 'numeric' });
        html += `
          <div class="quote-item comment-item">
            <p class="quote-text">${escapeHtml(c.text)}</p>
            <div class="quote-meta">
              <span class="quote-date">${date}</span>
              <button class="quote-action-btn delete" data-delete-comment="${c.id}">\u062D\u0630\u0641</button>
            </div>
          </div>
        `;
      });
      html += '</div>';
    });
    return html;
  }

  function renderBookmarksList(bookmarks) {
    if (bookmarks.length === 0) {
      return `<div class="empty-state"><p>\u0644\u0627 \u062A\u0648\u062C\u062F \u0639\u0644\u0627\u0645\u0627\u062A \u0628\u0639\u062F</p></div>`;
    }

    const grouped = {};
    bookmarks.forEach((bm) => {
      if (!grouped[bm.bookPath]) grouped[bm.bookPath] = [];
      grouped[bm.bookPath].push(bm);
    });

    let html = '';
    Object.entries(grouped).forEach(([bookPath, items]) => {
      const book = BOOKS.find((b) => b.path === bookPath);
      const bookTitle = book ? book.title : items[0].bookTitle || bookPath;
      html += `<div class="quotes-group"><h4 class="quotes-group-title">${bookTitle}</h4>`;
      items.sort((a, b) => b.createdAt - a.createdAt).forEach((bm) => {
        const date = new Date(bm.createdAt).toLocaleDateString('ar-SA', { month: 'short', day: 'numeric' });
        html += `
          <div class="quote-item bookmark-item" onclick="App.openBook('${bookPath}')">
            <p class="quote-text">\uD83D\uDD16 \u0639\u0646\u062F ${Math.round(bm.scrollPercent)}%${bm.note ? ' \u2014 ' + escapeHtml(bm.note) : ''}</p>
            <div class="quote-meta">
              <span class="quote-date">${date}</span>
              <button class="quote-action-btn delete" data-delete-bookmark="${bm.id}">\u062D\u0630\u0641</button>
            </div>
          </div>
        `;
      });
      html += '</div>';
    });
    return html;
  }

  async function shareText(text) {
    if (navigator.share) {
      try {
        await navigator.share({ text });
      } catch (e) {
        // User cancelled or share failed, fall back to clipboard
        copyToClipboard(text);
      }
    } else {
      copyToClipboard(text);
    }
  }

  function copyToClipboard(text) {
    if (navigator.clipboard) {
      navigator.clipboard.writeText(text).then(() => {
        showToast('\u062A\u0645 \u0627\u0644\u0646\u0633\u062E');
      });
    } else {
      // Fallback for older browsers / iOS Safari
      const ta = document.createElement('textarea');
      ta.value = text;
      ta.style.position = 'fixed';
      ta.style.opacity = '0';
      document.body.appendChild(ta);
      ta.focus();
      ta.select();
      try {
        document.execCommand('copy');
        showToast('\u062A\u0645 \u0627\u0644\u0646\u0633\u062E');
      } catch (e) {
        showToast('\u0641\u0634\u0644 \u0627\u0644\u0646\u0633\u062E');
      }
      document.body.removeChild(ta);
    }
  }

  // ==================== SETTINGS VIEW ====================

  async function renderSettings() {
    const settingsEl = document.getElementById('view-settings');
    if (!settingsEl) return;

    settingsEl.innerHTML = `
      <div class="settings-content" id="settings-content">
        <h2 class="settings-title">\u2699\uFE0F \u0627\u0644\u0625\u0639\u062F\u0627\u062F\u0627\u062A</h2>

        <div class="settings-section">
          <h3>\u0627\u0644\u0645\u0638\u0647\u0631</h3>
          <div class="theme-buttons">
            <button class="theme-btn ${currentTheme === 'dark' ? 'active' : ''}" data-theme="dark">
              <span class="theme-preview" style="background:#0f0f1a;color:#e0e0e0">\u0623</span>
              <span>\u062F\u0627\u0643\u0646</span>
            </button>
            <button class="theme-btn ${currentTheme === 'light' ? 'active' : ''}" data-theme="light">
              <span class="theme-preview" style="background:#f5f5f5;color:#2c2c2c">\u0623</span>
              <span>\u0641\u0627\u062A\u062D</span>
            </button>
            <button class="theme-btn ${currentTheme === 'sepia' ? 'active' : ''}" data-theme="sepia">
              <span class="theme-preview" style="background:#f4f1ea;color:#5c4b37">\u0623</span>
              <span>\u0628\u0646\u064A</span>
            </button>
          </div>
        </div>

        <div class="settings-section">
          <h3>\u062D\u062C\u0645 \u0627\u0644\u062E\u0637: <span id="settings-font-size-val">${currentFontSize}px</span></h3>
          <input type="range" id="settings-font-slider" class="settings-slider" min="14" max="24" value="${currentFontSize}" step="1">
        </div>

        <div class="settings-section">
          <h3>\u0646\u0648\u0639 \u0627\u0644\u062E\u0637</h3>
          <div class="font-family-buttons">
            <button class="font-btn ${currentFontFamily === 'Tajawal' ? 'active' : ''}" data-sfont="Tajawal" style="font-family:Tajawal">Tajawal</button>
            <button class="font-btn ${currentFontFamily === 'Amiri' ? 'active' : ''}" data-sfont="Amiri" style="font-family:Amiri">\u0623\u0645\u064A\u0631\u064A</button>
            <button class="font-btn ${currentFontFamily === 'Noto Naskh Arabic' ? 'active' : ''}" data-sfont="Noto Naskh Arabic" style="font-family:'Noto Naskh Arabic'">\u0646\u0648\u062A\u0648 \u0646\u0633\u062E</button>
          </div>
        </div>

        <div class="settings-section">
          <h3>\u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A</h3>
          <div class="data-buttons">
            <button class="data-btn" id="btn-export">\uD83D\uDCE4 \u062A\u0635\u062F\u064A\u0631 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A</button>
            <label class="data-btn" id="btn-import-label">
              \uD83D\uDCE5 \u0627\u0633\u062A\u064A\u0631\u0627\u062F
              <input type="file" id="btn-import" accept=".json" style="display:none">
            </label>
            <button class="data-btn danger" id="btn-clear">\uD83D\uDDD1\uFE0F \u0645\u0633\u062D \u0627\u0644\u0643\u0644</button>
          </div>
        </div>

        <div class="settings-section about-section">
          <h3>\u062D\u0648\u0644 \u0627\u0644\u062A\u0637\u0628\u064A\u0642</h3>
          <p>\u0645\u0643\u062A\u0628\u062A\u064A \u0627\u0644\u0634\u062E\u0635\u064A\u0629</p>
          <p class="version">\u0627\u0644\u0625\u0635\u062F\u0627\u0631 1.0.0</p>
        </div>
      </div>
    `;

    // Theme buttons
    settingsEl.querySelectorAll('.theme-btn').forEach((btn) => {
      btn.addEventListener('click', () => {
        const theme = btn.getAttribute('data-theme');
        applyTheme(theme);
        settingsEl.querySelectorAll('.theme-btn').forEach((b) => b.classList.remove('active'));
        btn.classList.add('active');
      });
    });

    // Font size slider
    const fontSlider = settingsEl.querySelector('#settings-font-slider');
    if (fontSlider) {
      fontSlider.addEventListener('input', (e) => {
        currentFontSize = parseInt(e.target.value);
        settingsEl.querySelector('#settings-font-size-val').textContent = currentFontSize + 'px';
        DB.setSetting('fontSize', currentFontSize);
        document.body.style.fontSize = currentFontSize + 'px';
      });
    }

    // Font family
    settingsEl.querySelectorAll('[data-sfont]').forEach((btn) => {
      btn.addEventListener('click', () => {
        currentFontFamily = btn.getAttribute('data-sfont');
        settingsEl.querySelectorAll('[data-sfont]').forEach((b) => b.classList.remove('active'));
        btn.classList.add('active');
        DB.setSetting('fontFamily', currentFontFamily);
        applyFontToBody();
      });
    });

    // Export
    const btnExport = settingsEl.querySelector('#btn-export');
    if (btnExport) {
      btnExport.addEventListener('click', async () => {
        const data = await DB.exportAll();
        if (data) {
          const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
          const url = URL.createObjectURL(blob);
          const a = document.createElement('a');
          a.href = url;
          a.download = 'maktabati-backup-' + formatDateKey(new Date()) + '.json';
          a.click();
          URL.revokeObjectURL(url);
          showToast('\u062A\u0645 \u062A\u0635\u062F\u064A\u0631 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A');
        }
      });
    }

    // Import
    const btnImport = settingsEl.querySelector('#btn-import');
    if (btnImport) {
      btnImport.addEventListener('change', async (e) => {
        const file = e.target.files[0];
        if (!file) return;

        try {
          const text = await file.text();
          const data = JSON.parse(text);
          await DB.importAll(data);
          showToast('\u062A\u0645 \u0627\u0633\u062A\u064A\u0631\u0627\u062F \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A');
          renderLibrary();
        } catch (err) {
          showToast('\u0641\u0634\u0644 \u0627\u0644\u0627\u0633\u062A\u064A\u0631\u0627\u062F: ' + err.message);
        }
      });
    }

    // Clear all
    const btnClear = settingsEl.querySelector('#btn-clear');
    if (btnClear) {
      btnClear.addEventListener('click', async () => {
        if (confirm('\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u0645\u0633\u062D \u062C\u0645\u064A\u0639 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A\u061F \u0644\u0627 \u064A\u0645\u0643\u0646 \u0627\u0644\u062A\u0631\u0627\u062C\u0639 \u0639\u0646 \u0647\u0630\u0627 \u0627\u0644\u0625\u062C\u0631\u0627\u0621.')) {
          await DB.clearAll();
          showToast('\u062A\u0645 \u0645\u0633\u062D \u062C\u0645\u064A\u0639 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A');
          renderLibrary();
        }
      });
    }
  }

  // ==================== ACTIONS VIEW ====================

  async function renderActions() {
    const actionsEl = document.getElementById('view-actions');
    if (!actionsEl) return;

    // Load all action states from settings
    const actionStates = {};
    for (const book of BOOKS) {
      const actions = BOOK_ACTIONS[book.id];
      if (!actions) continue;
      for (let i = 0; i < actions.length; i++) {
        const key = 'action:' + book.id + ':' + i;
        const val = await DB.getSetting(key);
        actionStates[key] = !!val;
      }
    }

    // Calculate stats
    let totalActions = 0;
    let completedActions = 0;
    const bookStats = {};

    BOOKS.forEach((book) => {
      const actions = BOOK_ACTIONS[book.id];
      if (!actions) return;
      let done = 0;
      actions.forEach((_, i) => {
        totalActions++;
        const key = 'action:' + book.id + ':' + i;
        if (actionStates[key]) {
          completedActions++;
          done++;
        }
      });
      bookStats[book.id] = { total: actions.length, done };
    });

    const overallPct = totalActions > 0 ? Math.round((completedActions / totalActions) * 100) : 0;

    // Build HTML
    let html = `
      <div class="actions-content">
        <div class="actions-overall">
          <div class="actions-overall-ring">
            <svg viewBox="0 0 100 100" width="80" height="80">
              <circle cx="50" cy="50" r="42" fill="none" stroke="var(--border)" stroke-width="8"/>
              <circle cx="50" cy="50" r="42" fill="none" stroke="var(--accent)" stroke-width="8"
                stroke-linecap="round" stroke-dasharray="${2 * Math.PI * 42}"
                stroke-dashoffset="${2 * Math.PI * 42 * (1 - overallPct / 100)}"
                transform="rotate(-90 50 50)"/>
            </svg>
            <span class="actions-overall-pct">${overallPct}%</span>
          </div>
          <div class="actions-overall-info">
            <span class="actions-overall-count">${completedActions} / ${totalActions}</span>
            <span class="actions-overall-label">\u0625\u062C\u0631\u0627\u0621 \u0645\u0643\u062A\u0645\u0644</span>
          </div>
        </div>
    `;

    // Group books by category
    const categoryOrder = ['productivity', 'finance', 'biography', 'pregnancy', 'fatherhood'];
    categoryOrder.forEach((catId) => {
      const cat = CATEGORIES.find((c) => c.id === catId);
      const catBooks = BOOKS.filter((b) => b.category === catId && BOOK_ACTIONS[b.id]);
      if (catBooks.length === 0) return;

      html += `<div class="actions-category">
        <h3 class="actions-category-title">${cat.icon} ${cat.ar}</h3>`;

      catBooks.forEach((book) => {
        const stats = bookStats[book.id];
        const bookPct = stats.total > 0 ? Math.round((stats.done / stats.total) * 100) : 0;
        const isAllDone = stats.done === stats.total;

        html += `
        <div class="actions-book ${isAllDone ? 'all-done' : ''}">
          <div class="actions-book-header" data-toggle-book="${book.id}">
            <span class="actions-book-emoji">${book.emoji}</span>
            <div class="actions-book-info">
              <span class="actions-book-title">${book.title}</span>
              <div class="actions-book-progress">
                <div class="actions-book-bar">
                  <div class="actions-book-bar-fill" style="width:${bookPct}%"></div>
                </div>
                <span class="actions-book-pct">${stats.done}/${stats.total}</span>
              </div>
            </div>
            <span class="actions-book-chevron">\u276F</span>
          </div>
          <div class="actions-book-list" id="actions-list-${book.id}" style="display:none">`;

        const actions = BOOK_ACTIONS[book.id];
        actions.forEach((action, i) => {
          const key = 'action:' + book.id + ':' + i;
          const checked = actionStates[key];
          html += `
            <label class="action-item ${checked ? 'done' : ''}">
              <input type="checkbox" ${checked ? 'checked' : ''} data-action-key="${key}">
              <span class="action-check">${checked ? '\u2713' : ''}</span>
              <span class="action-text">${action}</span>
            </label>`;
        });

        html += `</div></div>`;
      });

      html += `</div>`;
    });

    html += `</div>`;

    actionsEl.innerHTML = `
      <div class="view-header">
        <h2>\u062E\u0637\u0629 \u0627\u0644\u062A\u0637\u0628\u064A\u0642</h2>
      </div>
      ${html}
    `;

    // Toggle book expand/collapse
    actionsEl.querySelectorAll('[data-toggle-book]').forEach((header) => {
      header.addEventListener('click', () => {
        const bookId = header.getAttribute('data-toggle-book');
        const list = document.getElementById('actions-list-' + bookId);
        const chevron = header.querySelector('.actions-book-chevron');
        if (list) {
          const isOpen = list.style.display !== 'none';
          list.style.display = isOpen ? 'none' : 'block';
          if (chevron) chevron.style.transform = isOpen ? '' : 'rotate(90deg)';
        }
      });
    });

    // Checkbox handlers
    actionsEl.querySelectorAll('input[data-action-key]').forEach((cb) => {
      cb.addEventListener('change', async (e) => {
        e.stopPropagation();
        const key = cb.getAttribute('data-action-key');
        const checked = cb.checked;
        await DB.setSetting(key, checked ? 1 : 0);

        // Sync to cloud
        if (window.CloudSync) {
          CloudSync.pushSetting(key, checked ? 1 : 0);
        }

        // Re-render to update stats
        renderActions();
      });
    });
  }

  // ==================== UTILITIES ====================

  function formatDateKey(date) {
    const y = date.getFullYear();
    const m = String(date.getMonth() + 1).padStart(2, '0');
    const d = String(date.getDate()).padStart(2, '0');
    return `${y}-${m}-${d}`;
  }

  function escapeHtml(str) {
    if (!str) return '';
    const div = document.createElement('div');
    div.textContent = str;
    return div.innerHTML;
  }

  function escapeAttr(str) {
    if (!str) return '';
    return str
      .replace(/&/g, '&amp;')
      .replace(/"/g, '&quot;')
      .replace(/'/g, '&#39;')
      .replace(/</g, '&lt;')
      .replace(/>/g, '&gt;');
  }

  // ==================== PUBLIC API ====================

  window.App = {
    init,
    openBook,
    closeBook,
    switchView,
    BOOKS,
    CATEGORIES,
  };

})();
